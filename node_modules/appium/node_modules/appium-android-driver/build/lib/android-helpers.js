"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.helpers = void 0;

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

var _path = _interopRequireDefault(require("path"));

var _teen_process = require("teen_process");

var _asyncbox = require("asyncbox");

var _logger = _interopRequireDefault(require("./logger"));

var _appiumSupport = require("appium-support");

var _ioAppium = require("io.appium.settings");

var _bootstrap = _interopRequireDefault(require("./bootstrap"));

var _bluebird = _interopRequireDefault(require("bluebird"));

var _appiumAdb = _interopRequireDefault(require("appium-adb"));

var _unlockHelpers = _interopRequireWildcard(require("./unlock-helpers"));

const PACKAGE_INSTALL_TIMEOUT = 90000;
const CHROME_BROWSER_PACKAGE_ACTIVITY = {
  chrome: {
    pkg: 'com.android.chrome',
    activity: 'com.google.android.apps.chrome.Main'
  },
  chromium: {
    pkg: 'org.chromium.chrome.shell',
    activity: '.ChromeShellActivity'
  },
  chromebeta: {
    pkg: 'com.chrome.beta',
    activity: 'com.google.android.apps.chrome.Main'
  },
  browser: {
    pkg: 'com.android.browser',
    activity: 'com.android.browser.BrowserActivity'
  },
  'chromium-browser': {
    pkg: 'org.chromium.chrome',
    activity: 'com.google.android.apps.chrome.Main'
  },
  'chromium-webview': {
    pkg: 'org.chromium.webview_shell',
    activity: 'org.chromium.webview_shell.WebViewBrowserActivity'
  },
  default: {
    pkg: 'com.android.chrome',
    activity: 'com.google.android.apps.chrome.Main'
  }
};
const SETTINGS_HELPER_PKG_ID = 'io.appium.settings';
const SETTINGS_HELPER_MAIN_ACTIVITY = '.Settings';
const SETTINGS_HELPER_UNLOCK_ACTIVITY = '.Unlock';
let helpers = {};
exports.helpers = helpers;

helpers.createBaseADB = async function (opts = {}) {
  const {
    javaVersion,
    adbPort,
    suppressKillServer,
    remoteAdbHost,
    clearDeviceLogsOnStart,
    adbExecTimeout,
    useKeystore,
    keystorePath,
    keystorePassword,
    keyAlias,
    keyPassword
  } = opts;
  return await _appiumAdb.default.createADB({
    javaVersion,
    adbPort,
    suppressKillServer,
    remoteAdbHost,
    clearDeviceLogsOnStart,
    adbExecTimeout,
    useKeystore,
    keystorePath,
    keystorePassword,
    keyAlias,
    keyPassword
  });
};

helpers.parseJavaVersion = function (stderr) {
  let lines = stderr.split("\n");

  for (let line of lines) {
    if (new RegExp(/(java|openjdk) version/).test(line)) {
      return line.split(" ")[2].replace(/"/g, '');
    }
  }

  return null;
};

helpers.getJavaVersion = async function (logVersion = true) {
  let {
    stderr
  } = await (0, _teen_process.exec)('java', ['-version']);
  let javaVer = helpers.parseJavaVersion(stderr);

  if (javaVer === null) {
    throw new Error("Could not get the Java version. Is Java installed?");
  }

  if (logVersion) {
    _logger.default.info(`Java version is: ${javaVer}`);
  }

  return javaVer;
};

helpers.prepareEmulator = async function (adb, opts) {
  let {
    avd,
    avdArgs,
    language,
    locale,
    avdLaunchTimeout,
    avdReadyTimeout
  } = opts;

  if (!avd) {
    throw new Error("Cannot launch AVD without AVD name");
  }

  let avdName = avd.replace('@', '');
  let runningAVD = await adb.getRunningAVD(avdName);

  if (runningAVD !== null) {
    if (avdArgs && avdArgs.toLowerCase().indexOf("-wipe-data") > -1) {
      _logger.default.debug(`Killing '${avdName}' because it needs to be wiped at start.`);

      await adb.killEmulator(avdName);
    } else {
      _logger.default.debug("Not launching AVD because it is already running.");

      return;
    }
  }

  avdArgs = this.prepareAVDArgs(opts, adb, avdArgs);
  await adb.launchAVD(avd, avdArgs, language, locale, avdLaunchTimeout, avdReadyTimeout);
};

helpers.prepareAVDArgs = function (opts, adb, avdArgs) {
  let args = avdArgs ? [avdArgs] : [];

  if (!_lodash.default.isUndefined(opts.networkSpeed)) {
    let networkSpeed = this.ensureNetworkSpeed(adb, opts.networkSpeed);
    args.push('-netspeed', networkSpeed);
  }

  if (opts.isHeadless) {
    args.push('-no-window');
  }

  return args.join(' ');
};

helpers.ensureNetworkSpeed = function (adb, networkSpeed) {
  if (_lodash.default.values(adb.NETWORK_SPEED).indexOf(networkSpeed) !== -1) {
    return networkSpeed;
  }

  _logger.default.warn(`Wrong network speed param ${networkSpeed}, using default: full. Supported values: ${_lodash.default.values(adb.NETWORK_SPEED)}`);

  return adb.NETWORK_SPEED.FULL;
};

helpers.ensureDeviceLocale = async function (adb, language, country, script = null) {
  if (!_lodash.default.isString(language) && !_lodash.default.isString(country)) {
    _logger.default.warn(`setDeviceLanguageCountry requires language or country.`);

    _logger.default.warn(`Got language: '${language}' and country: '${country}'`);

    return;
  }

  await adb.setDeviceLanguageCountry(language, country, script);

  if (!(await adb.ensureCurrentLocale(language, country, script))) {
    const message = script ? `language: ${language}, country: ${country} and script: ${script}` : `language: ${language} and country: ${country}`;
    throw new Error(`Failed to set ${message}`);
  }
};

helpers.getDeviceInfoFromCaps = async function (opts = {}) {
  const adb = await helpers.createBaseADB(opts);
  let udid = opts.udid;
  let emPort = null;

  if (opts.avd) {
    await helpers.prepareEmulator(adb, opts);
    udid = adb.curDeviceId;
    emPort = adb.emulatorPort;
  } else {
    _logger.default.info("Retrieving device list");

    let devices = await adb.getDevicesWithRetry();

    if (udid) {
      if (!_lodash.default.includes(_lodash.default.map(devices, 'udid'), udid)) {
        _logger.default.errorAndThrow(`Device ${udid} was not in the list of connected devices`);
      }

      emPort = adb.getPortFromEmulatorString(udid);
    } else if (opts.platformVersion) {
      opts.platformVersion = `${opts.platformVersion}`.trim();

      _logger.default.info(`Looking for a device with Android '${opts.platformVersion}'`);

      let availDevicesStr = [];

      for (let device of devices) {
        await adb.setDeviceId(device.udid);
        let deviceOS = await adb.getPlatformVersion();
        availDevicesStr.push(`${device.udid} (${deviceOS})`);

        if (deviceOS.indexOf(opts.platformVersion) === 0) {
          udid = device.udid;
          break;
        }
      }

      if (!udid) {
        _logger.default.errorAndThrow(`Unable to find an active device or emulator ` + `with OS ${opts.platformVersion}. The following are available: ` + availDevicesStr.join(', '));
      }

      emPort = adb.getPortFromEmulatorString(udid);
    } else {
      udid = devices[0].udid;
      emPort = adb.getPortFromEmulatorString(udid);
    }
  }

  _logger.default.info(`Using device: ${udid}`);

  return {
    udid,
    emPort
  };
};

helpers.createADB = async function (opts = {}) {
  const {
    udid,
    emPort
  } = opts;
  const adb = await helpers.createBaseADB(opts);
  adb.setDeviceId(udid);

  if (emPort) {
    adb.setEmulatorPort(emPort);
  }

  return adb;
};

helpers.validatePackageActivityNames = function (opts) {
  for (const key of ['appPackage', 'appActivity', 'appWaitPackage', 'appWaitActivity']) {
    const name = opts[key];

    if (!name) {
      continue;
    }

    const match = /([^\w.*,])+/.exec(name);

    if (!match) {
      continue;
    }

    _logger.default.warn(`Capability '${key}' is expected to only include latin letters, digits, underscore, dot, comma and asterisk characters.`);

    _logger.default.warn(`Current value '${name}' has non-matching character at index ${match.index}: '${name.substring(0, match.index + 1)}'`);
  }
};

helpers.getLaunchInfo = async function (adb, opts) {
  let {
    app,
    appPackage,
    appActivity,
    appWaitPackage,
    appWaitActivity
  } = opts;

  if (!app) {
    _logger.default.warn("No app sent in, not parsing package/activity");

    return;
  }

  this.validatePackageActivityNames(opts);

  if (appPackage && appActivity) {
    return;
  }

  _logger.default.debug("Parsing package and activity from app manifest");

  let {
    apkPackage,
    apkActivity
  } = await adb.packageAndLaunchActivityFromManifest(app);

  if (apkPackage && !appPackage) {
    appPackage = apkPackage;
  }

  if (!appWaitPackage) {
    appWaitPackage = appPackage;
  }

  if (apkActivity && !appActivity) {
    appActivity = apkActivity;
  }

  if (!appWaitActivity) {
    appWaitActivity = appActivity;
  }

  _logger.default.debug(`Parsed package and activity are: ${apkPackage}/${apkActivity}`);

  return {
    appPackage,
    appWaitPackage,
    appActivity,
    appWaitActivity
  };
};

helpers.resetApp = async function (adb, opts = {}) {
  const {
    app,
    appPackage,
    fastReset,
    fullReset,
    androidInstallTimeout = PACKAGE_INSTALL_TIMEOUT,
    autoGrantPermissions,
    allowTestPackages
  } = opts;

  if (!appPackage) {
    throw new Error("'appPackage' option is required");
  }

  const isInstalled = await adb.isAppInstalled(appPackage);

  if (isInstalled) {
    try {
      await adb.forceStop(appPackage);
    } catch (ign) {}

    if (!fullReset && fastReset) {
      const output = await adb.clear(appPackage);

      if (_lodash.default.isString(output) && output.toLowerCase().includes('failed')) {
        throw new Error(`Cannot clear the application data of '${appPackage}'. Original error: ${output}`);
      }

      if (autoGrantPermissions) {
        try {
          await adb.grantAllPermissions(appPackage);
        } catch (error) {
          _logger.default.error(`Unable to grant permissions requested. Original error: ${error.message}`);
        }
      }

      _logger.default.debug(`Performed fast reset on the installed '${appPackage}' application (stop and clear)`);

      return;
    }
  }

  if (!app) {
    throw new Error("'app' option is required for reinstall");
  }

  _logger.default.debug(`Running full reset on '${appPackage}' (reinstall)`);

  if (isInstalled) {
    await adb.uninstallApk(appPackage);
  }

  await adb.install(app, {
    grantPermissions: autoGrantPermissions,
    timeout: androidInstallTimeout,
    allowTestPackages
  });
};

helpers.installApk = async function (adb, opts = {}) {
  const {
    app,
    appPackage,
    fastReset,
    fullReset,
    androidInstallTimeout = PACKAGE_INSTALL_TIMEOUT,
    autoGrantPermissions,
    allowTestPackages
  } = opts;

  if (!app || !appPackage) {
    throw new Error("'app' and 'appPackage' options are required");
  }

  if (fullReset) {
    await this.resetApp(adb, opts);
    return;
  }

  const shouldPerformFastReset = fastReset && (await adb.isAppInstalled(appPackage));
  await adb.installOrUpgrade(app, appPackage, {
    grantPermissions: autoGrantPermissions,
    timeout: androidInstallTimeout,
    allowTestPackages
  });

  if (shouldPerformFastReset) {
    _logger.default.info(`Performing fast reset on '${appPackage}'`);

    await this.resetApp(adb, opts);
  }
};

helpers.installOtherApks = async function (otherApps, adb, opts) {
  let {
    androidInstallTimeout = PACKAGE_INSTALL_TIMEOUT,
    autoGrantPermissions,
    allowTestPackages
  } = opts;
  await _bluebird.default.all(otherApps.map(otherApp => {
    _logger.default.debug(`Installing app: ${otherApp}`);

    return adb.installOrUpgrade(otherApp, null, {
      grantPermissions: autoGrantPermissions,
      timeout: androidInstallTimeout,
      allowTestPackages
    });
  }));
};

helpers.initUnicodeKeyboard = async function (adb) {
  _logger.default.debug('Enabling Unicode keyboard support');

  let defaultIME = await adb.defaultIME();

  _logger.default.debug(`Unsetting previous IME ${defaultIME}`);

  const appiumIME = `${SETTINGS_HELPER_PKG_ID}/.UnicodeIME`;

  _logger.default.debug(`Setting IME to '${appiumIME}'`);

  await adb.enableIME(appiumIME);
  await adb.setIME(appiumIME);
  return defaultIME;
};

helpers.setMockLocationApp = async function (adb, app) {
  try {
    if ((await adb.getApiLevel()) < 23) {
      await adb.shell(['settings', 'put', 'secure', 'mock_location', '1']);
    } else {
      await adb.shell(['appops', 'set', app, 'android:mock_location', 'allow']);
    }
  } catch (err) {
    _logger.default.warn(`Unable to set mock location for app '${app}': ${err.message}`);
  }
};

helpers.installHelperApp = async function (adb, apkPath, packageId, appName) {
  try {
    await adb.installOrUpgrade(apkPath, packageId, {
      grantPermissions: true
    });
  } catch (err) {
    _logger.default.warn(`Ignored error while installing Appium ${appName} helper: ` + `'${err.message}'. Manually uninstalling the application ` + `with package id '${packageId}' may help. Expect some Appium ` + `features may not work as expected unless this problem is ` + `fixed.`);
  }
};

helpers.pushSettingsApp = async function (adb, throwError = false) {
  _logger.default.debug("Pushing settings apk to device...");

  await helpers.installHelperApp(adb, _ioAppium.path, SETTINGS_HELPER_PKG_ID, 'Settings');

  if (await adb.processExists(SETTINGS_HELPER_PKG_ID)) {
    _logger.default.debug(`${SETTINGS_HELPER_PKG_ID} is already running. ` + `There is no need to reset its permissions.`);

    return;
  }

  if ((await adb.getApiLevel()) < 23) {
    _logger.default.info('Granting android.permission.SET_ANIMATION_SCALE, CHANGE_CONFIGURATION, ACCESS_FINE_LOCATION by pm grant');

    await adb.grantPermissions(SETTINGS_HELPER_PKG_ID, ['android.permission.SET_ANIMATION_SCALE', 'android.permission.CHANGE_CONFIGURATION', 'android.permission.ACCESS_FINE_LOCATION']);
  }

  try {
    await adb.startApp({
      pkg: SETTINGS_HELPER_PKG_ID,
      activity: SETTINGS_HELPER_MAIN_ACTIVITY,
      action: "android.intent.action.MAIN",
      category: "android.intent.category.LAUNCHER",
      flags: "0x10200000",
      stopApp: false
    });
  } catch (err) {
    _logger.default.warn(`Failed to launch settings app: ${err.message}`);

    if (throwError) {
      throw err;
    }
  }
};

helpers.pushStrings = async function (language, adb, opts) {
  const remoteDir = '/data/local/tmp';
  const stringsJson = 'strings.json';

  const remoteFile = _path.default.posix.resolve(remoteDir, stringsJson);

  await adb.rimraf(remoteFile);
  let app;

  try {
    app = opts.app || (await adb.pullApk(opts.appPackage, opts.tmpDir));
  } catch (err) {
    _logger.default.info(`Failed to pull an apk from '${opts.appPackage}' to '${opts.tmpDir}'. Original error: ${err.message}`);
  }

  if (_lodash.default.isEmpty(opts.appPackage) || !(await _appiumSupport.fs.exists(app))) {
    _logger.default.debug(`No app or package specified. Returning empty strings`);

    return {};
  }

  const stringsTmpDir = _path.default.resolve(opts.tmpDir, opts.appPackage);

  try {
    _logger.default.debug('Extracting strings from apk', app, language, stringsTmpDir);

    const {
      apkStrings,
      localPath
    } = await adb.extractStringsFromApk(app, language, stringsTmpDir);
    await adb.push(localPath, remoteDir);
    return apkStrings;
  } catch (err) {
    _logger.default.warn(`Could not get strings, continuing anyway. Original error: ${err.message}`);

    await adb.shell('echo', [`'{}' > ${remoteFile}`]);
  } finally {
    await _appiumSupport.fs.rimraf(stringsTmpDir);
  }

  return {};
};

helpers.unlockWithUIAutomation = async function (driver, adb, unlockCapabilities) {
  let unlockType = unlockCapabilities.unlockType;

  if (!_unlockHelpers.default.isValidUnlockType(unlockType)) {
    throw new Error(`Invalid unlock type ${unlockType}`);
  }

  let unlockKey = unlockCapabilities.unlockKey;

  if (!_unlockHelpers.default.isValidKey(unlockType, unlockKey)) {
    throw new Error(`Missing unlockKey ${unlockKey} capability for unlockType ${unlockType}`);
  }

  const unlockMethod = {
    [_unlockHelpers.PIN_UNLOCK]: _unlockHelpers.default.pinUnlock,
    [_unlockHelpers.PASSWORD_UNLOCK]: _unlockHelpers.default.passwordUnlock,
    [_unlockHelpers.PATTERN_UNLOCK]: _unlockHelpers.default.patternUnlock,
    [_unlockHelpers.FINGERPRINT_UNLOCK]: _unlockHelpers.default.fingerprintUnlock
  }[unlockType];
  await unlockMethod(adb, driver, unlockCapabilities);
};

helpers.unlockWithHelperApp = async function (adb) {
  _logger.default.info("Unlocking screen");

  let firstRun = true;
  await (0, _asyncbox.retry)(3, async function () {
    if (firstRun) {
      firstRun = false;
    } else {
      try {
        if (!(await adb.isScreenLocked())) {
          return;
        }
      } catch (e) {
        _logger.default.warn(`Error in isScreenLocked: ${e.message}`);

        _logger.default.warn("\"adb shell dumpsys window\" command has timed out.");

        _logger.default.warn("The reason of this timeout is the delayed adb response. Resetting adb server can improve it.");
      }
    }

    _logger.default.info(`Launching ${SETTINGS_HELPER_UNLOCK_ACTIVITY}`);

    await adb.shell(['am', 'start', '-n', `${SETTINGS_HELPER_PKG_ID}/${SETTINGS_HELPER_UNLOCK_ACTIVITY}`, '-c', 'android.intent.category.LAUNCHER', '-a', 'android.intent.action.MAIN', '-f', '0x10200000']);
    await _bluebird.default.delay(1000);
  });
};

helpers.unlock = async function (driver, adb, capabilities) {
  if (!(await adb.isScreenLocked())) {
    _logger.default.info("Screen already unlocked, doing nothing");

    return;
  }

  _logger.default.debug("Screen is locked, trying to unlock");

  if (_lodash.default.isUndefined(capabilities.unlockType)) {
    _logger.default.warn("Using app unlock, this is going to be deprecated!");

    await helpers.unlockWithHelperApp(adb);
  } else {
    await helpers.unlockWithUIAutomation(driver, adb, {
      unlockType: capabilities.unlockType,
      unlockKey: capabilities.unlockKey
    });
    await helpers.verifyUnlock(adb);
  }
};

helpers.verifyUnlock = async function (adb) {
  await (0, _asyncbox.retryInterval)(2, 1000, async () => {
    if (await adb.isScreenLocked()) {
      throw new Error("Screen did not unlock successfully, retrying");
    }

    _logger.default.debug("Screen unlocked successfully");
  });
};

helpers.initDevice = async function (adb, opts) {
  await adb.waitForDevice();
  await helpers.pushSettingsApp(adb);

  if (!opts.avd) {
    await helpers.setMockLocationApp(adb, SETTINGS_HELPER_PKG_ID);
  }

  await helpers.ensureDeviceLocale(adb, opts.language, opts.locale, opts.localeScript);
  await adb.startLogcat();

  if (opts.unicodeKeyboard) {
    return await helpers.initUnicodeKeyboard(adb);
  }
};

helpers.removeNullProperties = function (obj) {
  for (let key of _lodash.default.keys(obj)) {
    if (_lodash.default.isNull(obj[key]) || _lodash.default.isUndefined(obj[key])) {
      delete obj[key];
    }
  }
};

helpers.truncateDecimals = function (number, digits) {
  let multiplier = Math.pow(10, digits),
      adjustedNum = number * multiplier,
      truncatedNum = Math[adjustedNum < 0 ? 'ceil' : 'floor'](adjustedNum);
  return truncatedNum / multiplier;
};

helpers.isChromeBrowser = function (browser) {
  return _lodash.default.includes(Object.keys(CHROME_BROWSER_PACKAGE_ACTIVITY), (browser || '').toLowerCase());
};

helpers.getChromePkg = function (browser) {
  return CHROME_BROWSER_PACKAGE_ACTIVITY[browser.toLowerCase()] || CHROME_BROWSER_PACKAGE_ACTIVITY.default;
};

helpers.removeAllSessionWebSocketHandlers = async function (server, sessionId) {
  if (!server || !_lodash.default.isFunction(server.getWebSocketHandlers)) {
    return;
  }

  const activeHandlers = await server.getWebSocketHandlers(sessionId);

  for (const pathname of _lodash.default.keys(activeHandlers)) {
    await server.removeWebSocketHandler(pathname);
  }
};

helpers.parseArray = function (cap) {
  let parsedCaps;

  try {
    parsedCaps = JSON.parse(cap);
  } catch (ign) {}

  if (_lodash.default.isArray(parsedCaps)) {
    return parsedCaps;
  } else if (_lodash.default.isString(cap)) {
    return [cap];
  }

  throw new Error(`must provide a string or JSON Array; received ${cap}`);
};

helpers.validateDesiredCaps = function (caps) {
  if ((!caps.browserName || !this.isChromeBrowser(caps.browserName)) && !caps.app && !caps.appPackage) {
    _logger.default.errorAndThrow('The desired capabilities must include either an app, appPackage or browserName');
  }

  if (caps.browserName) {
    if (caps.app) {
      _logger.default.warn(`The desired capabilities should generally not include both an 'app' and a 'browserName'`);
    }

    if (caps.appPackage) {
      _logger.default.errorAndThrow(`The desired should not include both of an 'appPackage' and a 'browserName'`);
    }
  }

  return true;
};

helpers.bootstrap = _bootstrap.default;
helpers.unlocker = _unlockHelpers.default;
var _default = helpers;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9hbmRyb2lkLWhlbHBlcnMuanMiXSwibmFtZXMiOlsiUEFDS0FHRV9JTlNUQUxMX1RJTUVPVVQiLCJDSFJPTUVfQlJPV1NFUl9QQUNLQUdFX0FDVElWSVRZIiwiY2hyb21lIiwicGtnIiwiYWN0aXZpdHkiLCJjaHJvbWl1bSIsImNocm9tZWJldGEiLCJicm93c2VyIiwiZGVmYXVsdCIsIlNFVFRJTkdTX0hFTFBFUl9QS0dfSUQiLCJTRVRUSU5HU19IRUxQRVJfTUFJTl9BQ1RJVklUWSIsIlNFVFRJTkdTX0hFTFBFUl9VTkxPQ0tfQUNUSVZJVFkiLCJoZWxwZXJzIiwiY3JlYXRlQmFzZUFEQiIsIm9wdHMiLCJqYXZhVmVyc2lvbiIsImFkYlBvcnQiLCJzdXBwcmVzc0tpbGxTZXJ2ZXIiLCJyZW1vdGVBZGJIb3N0IiwiY2xlYXJEZXZpY2VMb2dzT25TdGFydCIsImFkYkV4ZWNUaW1lb3V0IiwidXNlS2V5c3RvcmUiLCJrZXlzdG9yZVBhdGgiLCJrZXlzdG9yZVBhc3N3b3JkIiwia2V5QWxpYXMiLCJrZXlQYXNzd29yZCIsIkFEQiIsImNyZWF0ZUFEQiIsInBhcnNlSmF2YVZlcnNpb24iLCJzdGRlcnIiLCJsaW5lcyIsInNwbGl0IiwibGluZSIsIlJlZ0V4cCIsInRlc3QiLCJyZXBsYWNlIiwiZ2V0SmF2YVZlcnNpb24iLCJsb2dWZXJzaW9uIiwiamF2YVZlciIsIkVycm9yIiwibG9nZ2VyIiwiaW5mbyIsInByZXBhcmVFbXVsYXRvciIsImFkYiIsImF2ZCIsImF2ZEFyZ3MiLCJsYW5ndWFnZSIsImxvY2FsZSIsImF2ZExhdW5jaFRpbWVvdXQiLCJhdmRSZWFkeVRpbWVvdXQiLCJhdmROYW1lIiwicnVubmluZ0FWRCIsImdldFJ1bm5pbmdBVkQiLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiLCJkZWJ1ZyIsImtpbGxFbXVsYXRvciIsInByZXBhcmVBVkRBcmdzIiwibGF1bmNoQVZEIiwiYXJncyIsIl8iLCJpc1VuZGVmaW5lZCIsIm5ldHdvcmtTcGVlZCIsImVuc3VyZU5ldHdvcmtTcGVlZCIsInB1c2giLCJpc0hlYWRsZXNzIiwiam9pbiIsInZhbHVlcyIsIk5FVFdPUktfU1BFRUQiLCJ3YXJuIiwiRlVMTCIsImVuc3VyZURldmljZUxvY2FsZSIsImNvdW50cnkiLCJzY3JpcHQiLCJpc1N0cmluZyIsInNldERldmljZUxhbmd1YWdlQ291bnRyeSIsImVuc3VyZUN1cnJlbnRMb2NhbGUiLCJtZXNzYWdlIiwiZ2V0RGV2aWNlSW5mb0Zyb21DYXBzIiwidWRpZCIsImVtUG9ydCIsImN1ckRldmljZUlkIiwiZW11bGF0b3JQb3J0IiwiZGV2aWNlcyIsImdldERldmljZXNXaXRoUmV0cnkiLCJpbmNsdWRlcyIsIm1hcCIsImVycm9yQW5kVGhyb3ciLCJnZXRQb3J0RnJvbUVtdWxhdG9yU3RyaW5nIiwicGxhdGZvcm1WZXJzaW9uIiwidHJpbSIsImF2YWlsRGV2aWNlc1N0ciIsImRldmljZSIsInNldERldmljZUlkIiwiZGV2aWNlT1MiLCJnZXRQbGF0Zm9ybVZlcnNpb24iLCJzZXRFbXVsYXRvclBvcnQiLCJ2YWxpZGF0ZVBhY2thZ2VBY3Rpdml0eU5hbWVzIiwia2V5IiwibmFtZSIsIm1hdGNoIiwiZXhlYyIsImluZGV4Iiwic3Vic3RyaW5nIiwiZ2V0TGF1bmNoSW5mbyIsImFwcCIsImFwcFBhY2thZ2UiLCJhcHBBY3Rpdml0eSIsImFwcFdhaXRQYWNrYWdlIiwiYXBwV2FpdEFjdGl2aXR5IiwiYXBrUGFja2FnZSIsImFwa0FjdGl2aXR5IiwicGFja2FnZUFuZExhdW5jaEFjdGl2aXR5RnJvbU1hbmlmZXN0IiwicmVzZXRBcHAiLCJmYXN0UmVzZXQiLCJmdWxsUmVzZXQiLCJhbmRyb2lkSW5zdGFsbFRpbWVvdXQiLCJhdXRvR3JhbnRQZXJtaXNzaW9ucyIsImFsbG93VGVzdFBhY2thZ2VzIiwiaXNJbnN0YWxsZWQiLCJpc0FwcEluc3RhbGxlZCIsImZvcmNlU3RvcCIsImlnbiIsIm91dHB1dCIsImNsZWFyIiwiZ3JhbnRBbGxQZXJtaXNzaW9ucyIsImVycm9yIiwidW5pbnN0YWxsQXBrIiwiaW5zdGFsbCIsImdyYW50UGVybWlzc2lvbnMiLCJ0aW1lb3V0IiwiaW5zdGFsbEFwayIsInNob3VsZFBlcmZvcm1GYXN0UmVzZXQiLCJpbnN0YWxsT3JVcGdyYWRlIiwiaW5zdGFsbE90aGVyQXBrcyIsIm90aGVyQXBwcyIsIkIiLCJhbGwiLCJvdGhlckFwcCIsImluaXRVbmljb2RlS2V5Ym9hcmQiLCJkZWZhdWx0SU1FIiwiYXBwaXVtSU1FIiwiZW5hYmxlSU1FIiwic2V0SU1FIiwic2V0TW9ja0xvY2F0aW9uQXBwIiwiZ2V0QXBpTGV2ZWwiLCJzaGVsbCIsImVyciIsImluc3RhbGxIZWxwZXJBcHAiLCJhcGtQYXRoIiwicGFja2FnZUlkIiwiYXBwTmFtZSIsInB1c2hTZXR0aW5nc0FwcCIsInRocm93RXJyb3IiLCJzZXR0aW5nc0Fwa1BhdGgiLCJwcm9jZXNzRXhpc3RzIiwic3RhcnRBcHAiLCJhY3Rpb24iLCJjYXRlZ29yeSIsImZsYWdzIiwic3RvcEFwcCIsInB1c2hTdHJpbmdzIiwicmVtb3RlRGlyIiwic3RyaW5nc0pzb24iLCJyZW1vdGVGaWxlIiwicGF0aCIsInBvc2l4IiwicmVzb2x2ZSIsInJpbXJhZiIsInB1bGxBcGsiLCJ0bXBEaXIiLCJpc0VtcHR5IiwiZnMiLCJleGlzdHMiLCJzdHJpbmdzVG1wRGlyIiwiYXBrU3RyaW5ncyIsImxvY2FsUGF0aCIsImV4dHJhY3RTdHJpbmdzRnJvbUFwayIsInVubG9ja1dpdGhVSUF1dG9tYXRpb24iLCJkcml2ZXIiLCJ1bmxvY2tDYXBhYmlsaXRpZXMiLCJ1bmxvY2tUeXBlIiwidW5sb2NrZXIiLCJpc1ZhbGlkVW5sb2NrVHlwZSIsInVubG9ja0tleSIsImlzVmFsaWRLZXkiLCJ1bmxvY2tNZXRob2QiLCJQSU5fVU5MT0NLIiwicGluVW5sb2NrIiwiUEFTU1dPUkRfVU5MT0NLIiwicGFzc3dvcmRVbmxvY2siLCJQQVRURVJOX1VOTE9DSyIsInBhdHRlcm5VbmxvY2siLCJGSU5HRVJQUklOVF9VTkxPQ0siLCJmaW5nZXJwcmludFVubG9jayIsInVubG9ja1dpdGhIZWxwZXJBcHAiLCJmaXJzdFJ1biIsImlzU2NyZWVuTG9ja2VkIiwiZSIsImRlbGF5IiwidW5sb2NrIiwiY2FwYWJpbGl0aWVzIiwidmVyaWZ5VW5sb2NrIiwiaW5pdERldmljZSIsIndhaXRGb3JEZXZpY2UiLCJsb2NhbGVTY3JpcHQiLCJzdGFydExvZ2NhdCIsInVuaWNvZGVLZXlib2FyZCIsInJlbW92ZU51bGxQcm9wZXJ0aWVzIiwib2JqIiwia2V5cyIsImlzTnVsbCIsInRydW5jYXRlRGVjaW1hbHMiLCJudW1iZXIiLCJkaWdpdHMiLCJtdWx0aXBsaWVyIiwiTWF0aCIsInBvdyIsImFkanVzdGVkTnVtIiwidHJ1bmNhdGVkTnVtIiwiaXNDaHJvbWVCcm93c2VyIiwiT2JqZWN0IiwiZ2V0Q2hyb21lUGtnIiwicmVtb3ZlQWxsU2Vzc2lvbldlYlNvY2tldEhhbmRsZXJzIiwic2VydmVyIiwic2Vzc2lvbklkIiwiaXNGdW5jdGlvbiIsImdldFdlYlNvY2tldEhhbmRsZXJzIiwiYWN0aXZlSGFuZGxlcnMiLCJwYXRobmFtZSIsInJlbW92ZVdlYlNvY2tldEhhbmRsZXIiLCJwYXJzZUFycmF5IiwiY2FwIiwicGFyc2VkQ2FwcyIsIkpTT04iLCJwYXJzZSIsImlzQXJyYXkiLCJ2YWxpZGF0ZURlc2lyZWRDYXBzIiwiY2FwcyIsImJyb3dzZXJOYW1lIiwiYm9vdHN0cmFwIiwiQm9vdHN0cmFwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBSUEsTUFBTUEsdUJBQXVCLEdBQUcsS0FBaEM7QUFDQSxNQUFNQywrQkFBK0IsR0FBRztBQUN0Q0MsRUFBQUEsTUFBTSxFQUFFO0FBQ05DLElBQUFBLEdBQUcsRUFBRSxvQkFEQztBQUVOQyxJQUFBQSxRQUFRLEVBQUU7QUFGSixHQUQ4QjtBQUt0Q0MsRUFBQUEsUUFBUSxFQUFFO0FBQ1JGLElB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YyxRQUFGLENBQVc4SixHQUFYLENBQUosRUFBcUI7QUFDMUIsV0FBTyxDQUFDQSxHQUFELENBQVA7QUFDRDs7QUFFRCxRQUFNLElBQUlqTSxLQUFKLENBQVcsaURBQWdEaU0sR0FBSSxFQUEvRCxDQUFOO0FBQ0QsQ0FiRDs7QUFlQTVOLE9BQU8sQ0FBQ2lPLG1CQUFSLEdBQThCLFVBQVVDLElBQVYsRUFBZ0I7QUFFNUMsTUFBSSxDQUFDLENBQUNBLElBQUksQ0FBQ0MsV0FBTixJQUFxQixDQUFDLEtBQUtuQixlQUFMLENBQXFCa0IsSUFBSSxDQUFDQyxXQUExQixDQUF2QixLQUFrRSxDQUFDRCxJQUFJLENBQUNySSxHQUF4RSxJQUErRSxDQUFDcUksSUFBSSxDQUFDcEksVUFBekYsRUFBcUc7QUFDbkdsRSxvQkFBTytDLGFBQVAsQ0FBcUIsZ0ZBQXJCO0FBQ0Q7O0FBQ0QsTUFBSXVKLElBQUksQ0FBQ0MsV0FBVCxFQUFzQjtBQUNwQixRQUFJRCxJQUFJLENBQUNySSxHQUFULEVBQWM7QUFFWmpFLHNCQUFPNkIsSUFBUCxDQUFhLHlGQUFiO0FBQ0Q7O0FBQ0QsUUFBSXlLLElBQUksQ0FBQ3BJLFVBQVQsRUFBcUI7QUFDbkJsRSxzQkFBTytDLGFBQVAsQ0FBc0IsNEVBQXRCO0FBQ0Q7QUFDRjs7QUFFRCxTQUFPLElBQVA7QUFDRCxDQWhCRDs7QUFrQkEzRSxPQUFPLENBQUNvTyxTQUFSLEdBQW9CQyxrQkFBcEI7QUFDQXJPLE9BQU8sQ0FBQzBLLFFBQVIsR0FBbUJBLHNCQUFuQjtlQUdlMUssTyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGV4ZWMgfSBmcm9tICd0ZWVuX3Byb2Nlc3MnO1xuaW1wb3J0IHsgcmV0cnksIHJldHJ5SW50ZXJ2YWwgfSBmcm9tICdhc3luY2JveCc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4vbG9nZ2VyJztcbmltcG9ydCB7IGZzIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IHsgcGF0aCBhcyBzZXR0aW5nc0Fwa1BhdGggfSBmcm9tICdpby5hcHBpdW0uc2V0dGluZ3MnO1xuaW1wb3J0IEJvb3RzdHJhcCBmcm9tICcuL2Jvb3RzdHJhcCc7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgQURCIGZyb20gJ2FwcGl1bS1hZGInO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyB1bmxvY2tlciwgUElOX1VOTE9DSywgUEFTU1dPUkRfVU5MT0NLLFxuICAgICAgICAgUEFUVEVSTl9VTkxPQ0ssIEZJTkdFUlBSSU5UX1VOTE9DSyB9IGZyb20gJy4vdW5sb2NrLWhlbHBlcnMnO1xuXG5cbmNvbnN0IFBBQ0tBR0VfSU5TVEFMTF9USU1FT1VUID0gOTAwMDA7IC8vIG1pbGxpc2Vjb25kc1xuY29uc3QgQ0hST01FX0JST1dTRVJfUEFDS0FHRV9BQ1RJVklUWSA9IHtcbiAgY2hyb21lOiB7XG4gICAgcGtnOiAnY29tLmFuZHJvaWQuY2hyb21lJyxcbiAgICBhY3Rpdml0eTogJ2NvbS5nb29nbGUuYW5kcm9pZC5hcHBzLmNocm9tZS5NYWluJyxcbiAgfSxcbiAgY2hyb21pdW06IHtcbiAgICBwa2c6ICdvcmcuY2hyb21pdW0uY2hyb21lLnNoZWxsJyxcbiAgICBhY3Rpdml0eTogJy5DaHJvbWVTaGVsbEFjdGl2aXR5JyxcbiAgfSxcbiAgY2hyb21lYmV0YToge1xuICAgIHBrZzogJ2NvbS5jaHJvbWUuYmV0YScsXG4gICAgYWN0aXZpdHk6ICdjb20uZ29vZ2xlLmFuZHJvaWQuYXBwcy5jaHJvbWUuTWFpbicsXG4gIH0sXG4gIGJyb3dzZXI6IHtcbiAgICBwa2c6ICdjb20uYW5kcm9pZC5icm93c2VyJyxcbiAgICBhY3Rpdml0eTogJ2NvbS5hbmRyb2lkLmJyb3dzZXIuQnJvd3NlckFjdGl2aXR5JyxcbiAgfSxcbiAgJ2Nocm9taXVtLWJyb3dzZXInOiB7XG4gICAgcGtnOiAnb3JnLmNocm9taXVtLmNocm9tZScsXG4gICAgYWN0aXZpdHk6ICdjb20uZ29vZ2xlLmFuZHJvaWQuYXBwcy5jaHJvbWUuTWFpbicsXG4gIH0sXG4gICdjaHJvbWl1bS13ZWJ2aWV3Jzoge1xuICAgIHBrZzogJ29yZy5jaHJvbWl1bS53ZWJ2aWV3X3NoZWxsJyxcbiAgICBhY3Rpdml0eTogJ29yZy5jaHJvbWl1bS53ZWJ2aWV3X3NoZWxsLldlYlZpZXdCcm93c2VyQWN0aXZpdHknLFxuICB9LFxuICBkZWZhdWx0OiB7XG4gICAgcGtnOiAnY29tLmFuZHJvaWQuY2hyb21lJyxcbiAgICBhY3Rpdml0eTogJ2NvbS5nb29nbGUuYW5kcm9pZC5hcHBzLmNocm9tZS5NYWluJyxcbiAgfSxcbn07XG5jb25zdCBTRVRUSU5HU19IRUxQRVJfUEtHX0lEID0gJ2lvLmFwcGl1bS5zZXR0aW5ncyc7XG5jb25zdCBTRVRUSU5HU19IRUxQRVJfTUFJTl9BQ1RJVklUWSA9ICcuU2V0dGluZ3MnO1xuY29uc3QgU0VUVElOR1NfSEVMUEVSX1VOTE9DS19BQ1RJVklUWSA9ICcuVW5sb2NrJztcblxubGV0IGhlbHBlcnMgPSB7fTtcblxuaGVscGVycy5jcmVhdGVCYXNlQURCID0gYXN5bmMgZnVuY3Rpb24gKG9wdHMgPSB7fSkge1xuICAvLyBmaWx0ZXIgb3V0IGFueSB1bndhbnRlZCBvcHRpb25zIHNlbnQgaW5cbiAgLy8gdGhpcyBsaXN0IHNob3VsZCBiZSB1cGRhdGVkIGFzIEFEQiB0YWtlcyBtb3JlIGFyZ3VtZW50c1xuICBjb25zdCB7XG4gICAgamF2YVZlcnNpb24sXG4gICAgYWRiUG9ydCxcbiAgICBzdXBwcmVzc0tpbGxTZXJ2ZXIsXG4gICAgcmVtb3RlQWRiSG9zdCxcbiAgICBjbGVhckRldmljZUxvZ3NPblN0YXJ0LFxuICAgIGFkYkV4ZWNUaW1lb3V0LFxuICAgIHVzZUtleXN0b3JlLFxuICAgIGtleXN0b3JlUGF0aCxcbiAgICBrZXlzdG9yZVBhc3N3b3JkLFxuICAgIGtleUFsaWFzLFxuICAgIGtleVBhc3N3b3JkLFxuICB9ID0gb3B0cztcbiAgcmV0dXJuIGF3YWl0IEFEQi5jcmVhdGVBREIoe1xuICAgIGphdmFWZXJzaW9uLFxuICAgIGFkYlBvcnQsXG4gICAgc3VwcHJlc3NLaWxsU2VydmVyLFxuICAgIHJlbW90ZUFkYkhvc3QsXG4gICAgY2xlYXJEZXZpY2VMb2dzT25TdGFydCxcbiAgICBhZGJFeGVjVGltZW91dCxcbiAgICB1c2VLZXlzdG9yZSxcbiAgICBrZXlzdG9yZVBhdGgsXG4gICAga2V5c3RvcmVQYXNzd29yZCxcbiAgICBrZXlBbGlhcyxcbiAgICBrZXlQYXNzd29yZCxcbiAgfSk7XG59O1xuXG5oZWxwZXJzLnBhcnNlSmF2YVZlcnNpb24gPSBmdW5jdGlvbiAoc3RkZXJyKSB7XG4gIGxldCBsaW5lcyA9IHN0ZGVyci5zcGxpdChcIlxcblwiKTtcbiAgZm9yIChsZXQgbGluZSBvZiBsaW5lcykge1xuICAgIGlmIChuZXcgUmVnRXhwKC8oamF2YXxvcGVuamRrKSB2ZXJzaW9uLykudGVzdChsaW5lKSkge1xuICAgICAgcmV0dXJuIGxpbmUuc3BsaXQoXCIgXCIpWzJdLnJlcGxhY2UoL1wiL2csICcnKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5oZWxwZXJzLmdldEphdmFWZXJzaW9uID0gYXN5bmMgZnVuY3Rpb24gKGxvZ1ZlcnNpb24gPSB0cnVlKSB7XG4gIGxldCB7c3RkZXJyfSA9IGF3YWl0IGV4ZWMoJ2phdmEnLCBbJy12ZXJzaW9uJ10pO1xuICBsZXQgamF2YVZlciA9IGhlbHBlcnMucGFyc2VKYXZhVmVyc2lvbihzdGRlcnIpO1xuICBpZiAoamF2YVZlciA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBnZXQgdGhlIEphdmEgdmVyc2lvbi4gSXMgSmF2YSBpbnN0YWxsZWQ/XCIpO1xuICB9XG4gIGlmIChsb2dWZXJzaW9uKSB7XG4gICAgbG9nZ2VyLmluZm8oYEphdmEgdmVyc2lvbiBpczogJHtqYXZhVmVyfWApO1xuICB9XG4gIHJldHVybiBqYXZhVmVyO1xufTtcblxuaGVscGVycy5wcmVwYXJlRW11bGF0b3IgPSBhc3luYyBmdW5jdGlvbiAoYWRiLCBvcHRzKSB7XG4gIGxldCB7XG4gICAgYXZkLFxuICAgIGF2ZEFyZ3MsXG4gICAgbGFuZ3VhZ2UsXG4gICAgbG9jYWxlLFxuICAgIGF2ZExhdW5jaFRpbWVvdXQsXG4gICAgYXZkUmVhZHlUaW1lb3V0LFxuICB9ID0gb3B0cztcbiAgaWYgKCFhdmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgbGF1bmNoIEFWRCB3aXRob3V0IEFWRCBuYW1lXCIpO1xuICB9XG4gIGxldCBhdmROYW1lID0gYXZkLnJlcGxhY2UoJ0AnLCAnJyk7XG4gIGxldCBydW5uaW5nQVZEID0gYXdhaXQgYWRiLmdldFJ1bm5pbmdBVkQoYXZkTmFtZSk7XG4gIGlmIChydW5uaW5nQVZEICE9PSBudWxsKSB7XG4gICAgaWYgKGF2ZEFyZ3MgJiYgYXZkQXJncy50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCItd2lwZS1kYXRhXCIpID4gLTEpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgS2lsbGluZyAnJHthdmROYW1lfScgYmVjYXVzZSBpdCBuZWVkcyB0byBiZSB3aXBlZCBhdCBzdGFydC5gKTtcbiAgICAgIGF3YWl0IGFkYi5raWxsRW11bGF0b3IoYXZkTmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcIk5vdCBsYXVuY2hpbmcgQVZEIGJlY2F1c2UgaXQgaXMgYWxyZWFkeSBydW5uaW5nLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgYXZkQXJncyA9IHRoaXMucHJlcGFyZUFWREFyZ3Mob3B0cywgYWRiLCBhdmRBcmdzKTtcbiAgYXdhaXQgYWRiLmxhdW5jaEFWRChhdmQsIGF2ZEFyZ3MsIGxhbmd1YWdlLCBsb2NhbGUsIGF2ZExhdW5jaFRpbWVvdXQsXG4gICAgICAgICAgICAgICAgICAgICAgYXZkUmVhZHlUaW1lb3V0KTtcbn07XG5cbmhlbHBlcnMucHJlcGFyZUFWREFyZ3MgPSBmdW5jdGlvbiAob3B0cywgYWRiLCBhdmRBcmdzKSB7XG4gIGxldCBhcmdzID0gYXZkQXJncyA/IFthdmRBcmdzXSA6IFtdO1xuICBpZiAoIV8uaXNVbmRlZmluZWQob3B0cy5uZXR3b3JrU3BlZWQpKSB7XG4gICAgbGV0IG5ldHdvcmtTcGVlZCA9IHRoaXMuZW5zdXJlTmV0d29ya1NwZWVkKGFkYiwgb3B0cy5uZXR3b3JrU3BlZWQpO1xuICAgIGFyZ3MucHVzaCgnLW5ldHNwZWVkJywgbmV0d29ya1NwZWVkKTtcbiAgfVxuICBpZiAob3B0cy5pc0hlYWRsZXNzKSB7XG4gICAgYXJncy5wdXNoKCctbm8td2luZG93Jyk7XG4gIH1cbiAgcmV0dXJuIGFyZ3Muam9pbignICcpO1xufTtcblxuaGVscGVycy5lbnN1cmVOZXR3b3JrU3BlZWQgPSBmdW5jdGlvbiAoYWRiLCBuZXR3b3JrU3BlZWQpIHtcbiAgaWYgKF8udmFsdWVzKGFkYi5ORVRXT1JLX1NQRUVEKS5pbmRleE9mKG5ldHdvcmtTcGVlZCkgIT09IC0xKSB7XG4gICAgcmV0dXJuIG5ldHdvcmtTcGVlZDtcbiAgfVxuICBsb2dnZXIud2FybihgV3JvbmcgbmV0d29yayBzcGVlZCBwYXJhbSAke25ldHdvcmtTcGVlZH0sIHVzaW5nIGRlZmF1bHQ6IGZ1bGwuIFN1cHBvcnRlZCB2YWx1ZXM6ICR7Xy52YWx1ZXMoYWRiLk5FVFdPUktfU1BFRUQpfWApO1xuICByZXR1cm4gYWRiLk5FVFdPUktfU1BFRUQuRlVMTDtcbn07XG5cbi8qKlxuICogU2V0IGFuZCBlbnN1cmUgdGhlIGxvY2FsZSBuYW1lIG9mIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYWRiIC0gVGhlIGFkYiBtb2R1bGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgLSBMYW5ndWFnZS4gVGhlIGxhbmd1YWdlIGZpZWxkIGlzIGNhc2UgaW5zZW5zaXRpdmUsIGJ1dCBMb2NhbGUgYWx3YXlzIGNhbm9uaWNhbGl6ZXMgdG8gbG93ZXIgY2FzZS5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogW2EtekEtWl17Miw4fS4gZS5nLiBlbiwgamEgOiBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvamF2YS91dGlsL0xvY2FsZS5odG1sXG4gKiBAcGFyYW0ge3N0cmluZ30gY291bnRyeSAtIENvdW50cnkuIFRoZSBjb3VudHJ5IChyZWdpb24pIGZpZWxkIGlzIGNhc2UgaW5zZW5zaXRpdmUsIGJ1dCBMb2NhbGUgYWx3YXlzIGNhbm9uaWNhbGl6ZXMgdG8gdXBwZXIgY2FzZS5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogW2EtekEtWl17Mn0gfCBbMC05XXszfS4gZS5nLiBVUywgSlAgOiBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvamF2YS91dGlsL0xvY2FsZS5odG1sXG4gKiBAcGFyYW0gez9zdHJpbmd9IHNjcmlwdCAtIFNjcmlwdC4gVGhlIHNjcmlwdCBmaWVsZCBpcyBjYXNlIGluc2Vuc2l0aXZlIGJ1dCBMb2NhbGUgYWx3YXlzIGNhbm9uaWNhbGl6ZXMgdG8gdGl0bGUgY2FzZS5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogW2EtekEtWl17NH0uIGUuZy4gSGFucyBpbiB6aC1IYW5zLUNOIDogaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2phdmEvdXRpbC9Mb2NhbGUuaHRtbFxuICogQHRocm93cyB7RXJyb3J9IElmIGl0IGZhaWxlZCB0byBzZXQgbG9jYWxlIHByb3Blcmx5XG4gKi9cbmhlbHBlcnMuZW5zdXJlRGV2aWNlTG9jYWxlID0gYXN5bmMgZnVuY3Rpb24gKGFkYiwgbGFuZ3VhZ2UsIGNvdW50cnksIHNjcmlwdCA9IG51bGwpIHtcbiAgaWYgKCFfLmlzU3RyaW5nKGxhbmd1YWdlKSAmJiAhXy5pc1N0cmluZyhjb3VudHJ5KSkge1xuICAgIGxvZ2dlci53YXJuKGBzZXREZXZpY2VMYW5ndWFnZUNvdW50cnkgcmVxdWlyZXMgbGFuZ3VhZ2Ugb3IgY291bnRyeS5gKTtcbiAgICBsb2dnZXIud2FybihgR290IGxhbmd1YWdlOiAnJHtsYW5ndWFnZX0nIGFuZCBjb3VudHJ5OiAnJHtjb3VudHJ5fSdgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBhd2FpdCBhZGIuc2V0RGV2aWNlTGFuZ3VhZ2VDb3VudHJ5KGxhbmd1YWdlLCBjb3VudHJ5LCBzY3JpcHQpO1xuXG4gIGlmICghYXdhaXQgYWRiLmVuc3VyZUN1cnJlbnRMb2NhbGUobGFuZ3VhZ2UsIGNvdW50cnksIHNjcmlwdCkpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gc2NyaXB0ID8gYGxhbmd1YWdlOiAke2xhbmd1YWdlfSwgY291bnRyeTogJHtjb3VudHJ5fSBhbmQgc2NyaXB0OiAke3NjcmlwdH1gIDogYGxhbmd1YWdlOiAke2xhbmd1YWdlfSBhbmQgY291bnRyeTogJHtjb3VudHJ5fWA7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2V0ICR7bWVzc2FnZX1gKTtcbiAgfVxufTtcblxuaGVscGVycy5nZXREZXZpY2VJbmZvRnJvbUNhcHMgPSBhc3luYyBmdW5jdGlvbiAob3B0cyA9IHt9KSB7XG4gIC8vIHdlIGNhbiBjcmVhdGUgYSB0aHJvd2F3YXkgQURCIGluc3RhbmNlIGhlcmUsIHNvIHRoZXJlIGlzIG5vIGRlcGVuZGVuY3lcbiAgLy8gb24gaW5zdGFudGlhdGluZyBvbiBlYXJsaWVyIChhdCB0aGlzIHBvaW50LCB3ZSBoYXZlIG5vIHVkaWQpXG4gIC8vIHdlIGNhbiBvbmx5IHVzZSB0aGlzIEFEQiBvYmplY3QgZm9yIGNvbW1hbmRzIHRoYXQgd291bGQgbm90IGJlIGNvbmZ1c2VkXG4gIC8vIGlmIG11bHRpcGxlIGRldmljZXMgYXJlIGNvbm5lY3RlZFxuICBjb25zdCBhZGIgPSBhd2FpdCBoZWxwZXJzLmNyZWF0ZUJhc2VBREIob3B0cyk7XG4gIGxldCB1ZGlkID0gb3B0cy51ZGlkO1xuICBsZXQgZW1Qb3J0ID0gbnVsbDtcblxuICAvLyBhIHNwZWNpZmljIGF2ZCBuYW1lIHdhcyBnaXZlbi4gdHJ5IHRvIGluaXRpYWxpemUgd2l0aCB0aGF0XG4gIGlmIChvcHRzLmF2ZCkge1xuICAgIGF3YWl0IGhlbHBlcnMucHJlcGFyZUVtdWxhdG9yKGFkYiwgb3B0cyk7XG4gICAgdWRpZCA9IGFkYi5jdXJEZXZpY2VJZDtcbiAgICBlbVBvcnQgPSBhZGIuZW11bGF0b3JQb3J0O1xuICB9IGVsc2Uge1xuICAgIC8vIG5vIGF2ZCBnaXZlbi4gbGV0cyB0cnkgd2hhdGV2ZXIncyBwbHVnZ2VkIGluIGRldmljZXMvZW11bGF0b3JzXG4gICAgbG9nZ2VyLmluZm8oXCJSZXRyaWV2aW5nIGRldmljZSBsaXN0XCIpO1xuICAgIGxldCBkZXZpY2VzID0gYXdhaXQgYWRiLmdldERldmljZXNXaXRoUmV0cnkoKTtcblxuICAgIC8vIHVkaWQgd2FzIGdpdmVuLCBsZXRzIHRyeSB0byBpbml0IHdpdGggdGhhdCBkZXZpY2VcbiAgICBpZiAodWRpZCkge1xuICAgICAgaWYgKCFfLmluY2x1ZGVzKF8ubWFwKGRldmljZXMsICd1ZGlkJyksIHVkaWQpKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvckFuZFRocm93KGBEZXZpY2UgJHt1ZGlkfSB3YXMgbm90IGluIHRoZSBsaXN0IG9mIGNvbm5lY3RlZCBkZXZpY2VzYCk7XG4gICAgICB9XG4gICAgICBlbVBvcnQgPSBhZGIuZ2V0UG9ydEZyb21FbXVsYXRvclN0cmluZyh1ZGlkKTtcbiAgICB9IGVsc2UgaWYgKG9wdHMucGxhdGZvcm1WZXJzaW9uKSB7XG4gICAgICBvcHRzLnBsYXRmb3JtVmVyc2lvbiA9IGAke29wdHMucGxhdGZvcm1WZXJzaW9ufWAudHJpbSgpO1xuXG4gICAgICAvLyBhIHBsYXRmb3JtIHZlcnNpb24gd2FzIGdpdmVuLiBsZXRzIHRyeSB0byBmaW5kIGEgZGV2aWNlIHdpdGggdGhlIHNhbWUgb3NcbiAgICAgIGxvZ2dlci5pbmZvKGBMb29raW5nIGZvciBhIGRldmljZSB3aXRoIEFuZHJvaWQgJyR7b3B0cy5wbGF0Zm9ybVZlcnNpb259J2ApO1xuXG4gICAgICAvLyBpbiBjYXNlIHdlIGZhaWwgdG8gZmluZCBzb21ldGhpbmcsIGdpdmUgdGhlIHVzZXIgYSB1c2VmdWwgbG9nIHRoYXQgaGFzXG4gICAgICAvLyB0aGUgZGV2aWNlIHVkaWRzIGFuZCBvcyB2ZXJzaW9ucyBzbyB0aGV5IGtub3cgd2hhdCdzIGF2YWlsYWJsZVxuICAgICAgbGV0IGF2YWlsRGV2aWNlc1N0ciA9IFtdO1xuXG4gICAgICAvLyBmaXJzdCB0cnkgc3RhcnRlZCBkZXZpY2VzL2VtdWxhdG9yc1xuICAgICAgZm9yIChsZXQgZGV2aWNlIG9mIGRldmljZXMpIHtcbiAgICAgICAgLy8gZGlyZWN0IGFkYiBjYWxscyB0byB0aGUgc3BlY2lmaWMgZGV2aWNlXG4gICAgICAgIGF3YWl0IGFkYi5zZXREZXZpY2VJZChkZXZpY2UudWRpZCk7XG4gICAgICAgIGxldCBkZXZpY2VPUyA9IGF3YWl0IGFkYi5nZXRQbGF0Zm9ybVZlcnNpb24oKTtcblxuICAgICAgICAvLyBidWlsZCB1cCBvdXIgaW5mbyBzdHJpbmcgb2YgYXZhaWxhYmxlIGRldmljZXMgYXMgd2UgaXRlcmF0ZVxuICAgICAgICBhdmFpbERldmljZXNTdHIucHVzaChgJHtkZXZpY2UudWRpZH0gKCR7ZGV2aWNlT1N9KWApO1xuXG4gICAgICAgIC8vIHdlIGRvIGEgYmVnaW5zIHdpdGggY2hlY2sgZm9yIGltcGxpZWQgd2lsZGNhcmQgbWF0Y2hpbmdcbiAgICAgICAgLy8gZWc6IDQgbWF0Y2hlcyA0LjEsIDQuMCwgNC4xLjMtc2Ftc3VuZywgZXRjXG4gICAgICAgIGlmIChkZXZpY2VPUy5pbmRleE9mKG9wdHMucGxhdGZvcm1WZXJzaW9uKSA9PT0gMCkge1xuICAgICAgICAgIHVkaWQgPSBkZXZpY2UudWRpZDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB3ZSBjb3VsZG4ndCBmaW5kIGFueXRoaW5nISBxdWl0XG4gICAgICBpZiAoIXVkaWQpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yQW5kVGhyb3coYFVuYWJsZSB0byBmaW5kIGFuIGFjdGl2ZSBkZXZpY2Ugb3IgZW11bGF0b3IgYCArXG4gICAgICAgICAgYHdpdGggT1MgJHtvcHRzLnBsYXRmb3JtVmVyc2lvbn0uIFRoZSBmb2xsb3dpbmcgYXJlIGF2YWlsYWJsZTogYCArIGF2YWlsRGV2aWNlc1N0ci5qb2luKCcsICcpKTtcbiAgICAgIH1cblxuICAgICAgZW1Qb3J0ID0gYWRiLmdldFBvcnRGcm9tRW11bGF0b3JTdHJpbmcodWRpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGEgdWRpZCB3YXMgbm90IGdpdmVuLCBncmFiIHRoZSBmaXJzdCBkZXZpY2Ugd2Ugc2VlXG4gICAgICB1ZGlkID0gZGV2aWNlc1swXS51ZGlkO1xuICAgICAgZW1Qb3J0ID0gYWRiLmdldFBvcnRGcm9tRW11bGF0b3JTdHJpbmcodWRpZCk7XG4gICAgfVxuICB9XG5cbiAgbG9nZ2VyLmluZm8oYFVzaW5nIGRldmljZTogJHt1ZGlkfWApO1xuICByZXR1cm4ge3VkaWQsIGVtUG9ydH07XG59O1xuXG4vLyByZXR1cm5zIGEgbmV3IGFkYiBpbnN0YW5jZSB3aXRoIGRldmljZUlkIHNldFxuaGVscGVycy5jcmVhdGVBREIgPSBhc3luYyBmdW5jdGlvbiAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHt1ZGlkLCBlbVBvcnR9ID0gb3B0cztcbiAgY29uc3QgYWRiID0gYXdhaXQgaGVscGVycy5jcmVhdGVCYXNlQURCKG9wdHMpO1xuICBhZGIuc2V0RGV2aWNlSWQodWRpZCk7XG4gIGlmIChlbVBvcnQpIHtcbiAgICBhZGIuc2V0RW11bGF0b3JQb3J0KGVtUG9ydCk7XG4gIH1cblxuICByZXR1cm4gYWRiO1xufTtcblxuaGVscGVycy52YWxpZGF0ZVBhY2thZ2VBY3Rpdml0eU5hbWVzID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgZm9yIChjb25zdCBrZXkgb2YgWydhcHBQYWNrYWdlJywgJ2FwcEFjdGl2aXR5JywgJ2FwcFdhaXRQYWNrYWdlJywgJ2FwcFdhaXRBY3Rpdml0eSddKSB7XG4gICAgY29uc3QgbmFtZSA9IG9wdHNba2V5XTtcbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG1hdGNoID0gLyhbXlxcdy4qLF0pKy8uZXhlYyhuYW1lKTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBsb2dnZXIud2FybihgQ2FwYWJpbGl0eSAnJHtrZXl9JyBpcyBleHBlY3RlZCB0byBvbmx5IGluY2x1ZGUgbGF0aW4gbGV0dGVycywgZGlnaXRzLCB1bmRlcnNjb3JlLCBkb3QsIGNvbW1hIGFuZCBhc3RlcmlzayBjaGFyYWN0ZXJzLmApO1xuICAgIGxvZ2dlci53YXJuKGBDdXJyZW50IHZhbHVlICcke25hbWV9JyBoYXMgbm9uLW1hdGNoaW5nIGNoYXJhY3RlciBhdCBpbmRleCAke21hdGNoLmluZGV4fTogJyR7bmFtZS5zdWJzdHJpbmcoMCwgbWF0Y2guaW5kZXggKyAxKX0nYCk7XG4gIH1cbn07XG5cbmhlbHBlcnMuZ2V0TGF1bmNoSW5mbyA9IGFzeW5jIGZ1bmN0aW9uIChhZGIsIG9wdHMpIHtcbiAgbGV0IHthcHAsIGFwcFBhY2thZ2UsIGFwcEFjdGl2aXR5LCBhcHBXYWl0UGFja2FnZSwgYXBwV2FpdEFjdGl2aXR5fSA9IG9wdHM7XG4gIGlmICghYXBwKSB7XG4gICAgbG9nZ2VyLndhcm4oXCJObyBhcHAgc2VudCBpbiwgbm90IHBhcnNpbmcgcGFja2FnZS9hY3Rpdml0eVwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLnZhbGlkYXRlUGFja2FnZUFjdGl2aXR5TmFtZXMob3B0cyk7XG5cbiAgaWYgKGFwcFBhY2thZ2UgJiYgYXBwQWN0aXZpdHkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsb2dnZXIuZGVidWcoXCJQYXJzaW5nIHBhY2thZ2UgYW5kIGFjdGl2aXR5IGZyb20gYXBwIG1hbmlmZXN0XCIpO1xuICBsZXQge2Fwa1BhY2thZ2UsIGFwa0FjdGl2aXR5fSA9XG4gICAgYXdhaXQgYWRiLnBhY2thZ2VBbmRMYXVuY2hBY3Rpdml0eUZyb21NYW5pZmVzdChhcHApO1xuICBpZiAoYXBrUGFja2FnZSAmJiAhYXBwUGFja2FnZSkge1xuICAgIGFwcFBhY2thZ2UgPSBhcGtQYWNrYWdlO1xuICB9XG4gIGlmICghYXBwV2FpdFBhY2thZ2UpIHtcbiAgICBhcHBXYWl0UGFja2FnZSA9IGFwcFBhY2thZ2U7XG4gIH1cbiAgaWYgKGFwa0FjdGl2aXR5ICYmICFhcHBBY3Rpdml0eSkge1xuICAgIGFwcEFjdGl2aXR5ID0gYXBrQWN0aXZpdHk7XG4gIH1cbiAgaWYgKCFhcHBXYWl0QWN0aXZpdHkpIHtcbiAgICBhcHBXYWl0QWN0aXZpdHkgPSBhcHBBY3Rpdml0eTtcbiAgfVxuICBsb2dnZXIuZGVidWcoYFBhcnNlZCBwYWNrYWdlIGFuZCBhY3Rpdml0eSBhcmU6ICR7YXBrUGFja2FnZX0vJHthcGtBY3Rpdml0eX1gKTtcbiAgcmV0dXJuIHthcHBQYWNrYWdlLCBhcHBXYWl0UGFja2FnZSwgYXBwQWN0aXZpdHksIGFwcFdhaXRBY3Rpdml0eX07XG59O1xuXG5oZWxwZXJzLnJlc2V0QXBwID0gYXN5bmMgZnVuY3Rpb24gKGFkYiwgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IHtcbiAgICBhcHAsXG4gICAgYXBwUGFja2FnZSxcbiAgICBmYXN0UmVzZXQsXG4gICAgZnVsbFJlc2V0LFxuICAgIGFuZHJvaWRJbnN0YWxsVGltZW91dCA9IFBBQ0tBR0VfSU5TVEFMTF9USU1FT1VULFxuICAgIGF1dG9HcmFudFBlcm1pc3Npb25zLFxuICAgIGFsbG93VGVzdFBhY2thZ2VzXG4gIH0gPSBvcHRzO1xuXG4gIGlmICghYXBwUGFja2FnZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIidhcHBQYWNrYWdlJyBvcHRpb24gaXMgcmVxdWlyZWRcIik7XG4gIH1cblxuICBjb25zdCBpc0luc3RhbGxlZCA9IGF3YWl0IGFkYi5pc0FwcEluc3RhbGxlZChhcHBQYWNrYWdlKTtcblxuICBpZiAoaXNJbnN0YWxsZWQpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYWRiLmZvcmNlU3RvcChhcHBQYWNrYWdlKTtcbiAgICB9IGNhdGNoIChpZ24pIHt9XG4gICAgLy8gZnVsbFJlc2V0IGhhcyBwcmlvcml0eSBvdmVyIGZhc3RSZXNldFxuICAgIGlmICghZnVsbFJlc2V0ICYmIGZhc3RSZXNldCkge1xuICAgICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgYWRiLmNsZWFyKGFwcFBhY2thZ2UpO1xuICAgICAgaWYgKF8uaXNTdHJpbmcob3V0cHV0KSAmJiBvdXRwdXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZmFpbGVkJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY2xlYXIgdGhlIGFwcGxpY2F0aW9uIGRhdGEgb2YgJyR7YXBwUGFja2FnZX0nLiBPcmlnaW5hbCBlcnJvcjogJHtvdXRwdXR9YCk7XG4gICAgICB9XG4gICAgICAvLyBleGVjdXRpbmcgYHNoZWxsIHBtIGNsZWFyYCByZXNldHMgcHJldmlvdXNseSBhc3NpZ25lZCBhcHBsaWNhdGlvbiBwZXJtaXNzaW9ucyBhcyB3ZWxsXG4gICAgICBpZiAoYXV0b0dyYW50UGVybWlzc2lvbnMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBhZGIuZ3JhbnRBbGxQZXJtaXNzaW9ucyhhcHBQYWNrYWdlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoYFVuYWJsZSB0byBncmFudCBwZXJtaXNzaW9ucyByZXF1ZXN0ZWQuIE9yaWdpbmFsIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxvZ2dlci5kZWJ1ZyhgUGVyZm9ybWVkIGZhc3QgcmVzZXQgb24gdGhlIGluc3RhbGxlZCAnJHthcHBQYWNrYWdlfScgYXBwbGljYXRpb24gKHN0b3AgYW5kIGNsZWFyKWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmICghYXBwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiJ2FwcCcgb3B0aW9uIGlzIHJlcXVpcmVkIGZvciByZWluc3RhbGxcIik7XG4gIH1cblxuICBsb2dnZXIuZGVidWcoYFJ1bm5pbmcgZnVsbCByZXNldCBvbiAnJHthcHBQYWNrYWdlfScgKHJlaW5zdGFsbClgKTtcbiAgaWYgKGlzSW5zdGFsbGVkKSB7XG4gICAgYXdhaXQgYWRiLnVuaW5zdGFsbEFwayhhcHBQYWNrYWdlKTtcbiAgfVxuICBhd2FpdCBhZGIuaW5zdGFsbChhcHAsIHtcbiAgICBncmFudFBlcm1pc3Npb25zOiBhdXRvR3JhbnRQZXJtaXNzaW9ucyxcbiAgICB0aW1lb3V0OiBhbmRyb2lkSW5zdGFsbFRpbWVvdXQsXG4gICAgYWxsb3dUZXN0UGFja2FnZXMsXG4gIH0pO1xufTtcblxuaGVscGVycy5pbnN0YWxsQXBrID0gYXN5bmMgZnVuY3Rpb24gKGFkYiwgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IHtcbiAgICBhcHAsXG4gICAgYXBwUGFja2FnZSxcbiAgICBmYXN0UmVzZXQsXG4gICAgZnVsbFJlc2V0LFxuICAgIGFuZHJvaWRJbnN0YWxsVGltZW91dCA9IFBBQ0tBR0VfSU5TVEFMTF9USU1FT1VULFxuICAgIGF1dG9HcmFudFBlcm1pc3Npb25zLFxuICAgIGFsbG93VGVzdFBhY2thZ2VzXG4gIH0gPSBvcHRzO1xuXG4gIGlmICghYXBwIHx8ICFhcHBQYWNrYWdlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiJ2FwcCcgYW5kICdhcHBQYWNrYWdlJyBvcHRpb25zIGFyZSByZXF1aXJlZFwiKTtcbiAgfVxuXG4gIGlmIChmdWxsUmVzZXQpIHtcbiAgICBhd2FpdCB0aGlzLnJlc2V0QXBwKGFkYiwgb3B0cyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gVGhlcmUgaXMgbm8gbmVlZCB0byByZXNldCB0aGUgbmV3bHkgaW5zdGFsbGVkIGFwcFxuICBjb25zdCBzaG91bGRQZXJmb3JtRmFzdFJlc2V0ID0gZmFzdFJlc2V0ICYmIGF3YWl0IGFkYi5pc0FwcEluc3RhbGxlZChhcHBQYWNrYWdlKTtcblxuICBhd2FpdCBhZGIuaW5zdGFsbE9yVXBncmFkZShhcHAsIGFwcFBhY2thZ2UsIHtcbiAgICBncmFudFBlcm1pc3Npb25zOiBhdXRvR3JhbnRQZXJtaXNzaW9ucyxcbiAgICB0aW1lb3V0OiBhbmRyb2lkSW5zdGFsbFRpbWVvdXQsXG4gICAgYWxsb3dUZXN0UGFja2FnZXMsXG4gIH0pO1xuXG4gIGlmIChzaG91bGRQZXJmb3JtRmFzdFJlc2V0KSB7XG4gICAgbG9nZ2VyLmluZm8oYFBlcmZvcm1pbmcgZmFzdCByZXNldCBvbiAnJHthcHBQYWNrYWdlfSdgKTtcbiAgICBhd2FpdCB0aGlzLnJlc2V0QXBwKGFkYiwgb3B0cyk7XG4gIH1cbn07XG5cbi8qKlxuICogSW5zdGFsbHMgYW4gYXJyYXkgb2YgYXBrc1xuICogQHBhcmFtIHtBREJ9IGFkYiBJbnN0YW5jZSBvZiBBcHBpdW0gQURCIG9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0cyBkZWZpbmVkIGluIGRyaXZlci5qc1xuICovXG5oZWxwZXJzLmluc3RhbGxPdGhlckFwa3MgPSBhc3luYyBmdW5jdGlvbiAob3RoZXJBcHBzLCBhZGIsIG9wdHMpIHtcbiAgbGV0IHtcbiAgICBhbmRyb2lkSW5zdGFsbFRpbWVvdXQgPSBQQUNLQUdFX0lOU1RBTExfVElNRU9VVCxcbiAgICBhdXRvR3JhbnRQZXJtaXNzaW9ucyxcbiAgICBhbGxvd1Rlc3RQYWNrYWdlc1xuICB9ID0gb3B0cztcblxuICAvLyBJbnN0YWxsIGFsbCBvZiB0aGUgQVBLJ3MgYXN5bmNocm9ub3VzbHlcbiAgYXdhaXQgQi5hbGwob3RoZXJBcHBzLm1hcCgob3RoZXJBcHApID0+IHtcbiAgICBsb2dnZXIuZGVidWcoYEluc3RhbGxpbmcgYXBwOiAke290aGVyQXBwfWApO1xuICAgIHJldHVybiBhZGIuaW5zdGFsbE9yVXBncmFkZShvdGhlckFwcCwgbnVsbCwge1xuICAgICAgZ3JhbnRQZXJtaXNzaW9uczogYXV0b0dyYW50UGVybWlzc2lvbnMsXG4gICAgICB0aW1lb3V0OiBhbmRyb2lkSW5zdGFsbFRpbWVvdXQsXG4gICAgICBhbGxvd1Rlc3RQYWNrYWdlcyxcbiAgICB9KTtcbiAgfSkpO1xufTtcblxuaGVscGVycy5pbml0VW5pY29kZUtleWJvYXJkID0gYXN5bmMgZnVuY3Rpb24gKGFkYikge1xuICBsb2dnZXIuZGVidWcoJ0VuYWJsaW5nIFVuaWNvZGUga2V5Ym9hcmQgc3VwcG9ydCcpO1xuXG4gIC8vIGdldCB0aGUgZGVmYXVsdCBJTUUgc28gd2UgY2FuIHJldHVybiBiYWNrIHRvIGl0IGxhdGVyIGlmIHdlIHdhbnRcbiAgbGV0IGRlZmF1bHRJTUUgPSBhd2FpdCBhZGIuZGVmYXVsdElNRSgpO1xuXG4gIGxvZ2dlci5kZWJ1ZyhgVW5zZXR0aW5nIHByZXZpb3VzIElNRSAke2RlZmF1bHRJTUV9YCk7XG4gIGNvbnN0IGFwcGl1bUlNRSA9IGAke1NFVFRJTkdTX0hFTFBFUl9QS0dfSUR9Ly5Vbmljb2RlSU1FYDtcbiAgbG9nZ2VyLmRlYnVnKGBTZXR0aW5nIElNRSB0byAnJHthcHBpdW1JTUV9J2ApO1xuICBhd2FpdCBhZGIuZW5hYmxlSU1FKGFwcGl1bUlNRSk7XG4gIGF3YWl0IGFkYi5zZXRJTUUoYXBwaXVtSU1FKTtcbiAgcmV0dXJuIGRlZmF1bHRJTUU7XG59O1xuXG5oZWxwZXJzLnNldE1vY2tMb2NhdGlvbkFwcCA9IGFzeW5jIGZ1bmN0aW9uIChhZGIsIGFwcCkge1xuICB0cnkge1xuICAgIGlmIChhd2FpdCBhZGIuZ2V0QXBpTGV2ZWwoKSA8IDIzKSB7XG4gICAgICBhd2FpdCBhZGIuc2hlbGwoWydzZXR0aW5ncycsICdwdXQnLCAnc2VjdXJlJywgJ21vY2tfbG9jYXRpb24nLCAnMSddKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgYWRiLnNoZWxsKFsnYXBwb3BzJywgJ3NldCcsIGFwcCwgJ2FuZHJvaWQ6bW9ja19sb2NhdGlvbicsICdhbGxvdyddKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZ2dlci53YXJuKGBVbmFibGUgdG8gc2V0IG1vY2sgbG9jYXRpb24gZm9yIGFwcCAnJHthcHB9JzogJHtlcnIubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuaGVscGVycy5pbnN0YWxsSGVscGVyQXBwID0gYXN5bmMgZnVuY3Rpb24gKGFkYiwgYXBrUGF0aCwgcGFja2FnZUlkLCBhcHBOYW1lKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgYWRiLmluc3RhbGxPclVwZ3JhZGUoYXBrUGF0aCwgcGFja2FnZUlkLCB7Z3JhbnRQZXJtaXNzaW9uczogdHJ1ZX0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2dnZXIud2FybihgSWdub3JlZCBlcnJvciB3aGlsZSBpbnN0YWxsaW5nIEFwcGl1bSAke2FwcE5hbWV9IGhlbHBlcjogYCArXG4gICAgICAgICAgICAgICAgYCcke2Vyci5tZXNzYWdlfScuIE1hbnVhbGx5IHVuaW5zdGFsbGluZyB0aGUgYXBwbGljYXRpb24gYCArXG4gICAgICAgICAgICAgICAgYHdpdGggcGFja2FnZSBpZCAnJHtwYWNrYWdlSWR9JyBtYXkgaGVscC4gRXhwZWN0IHNvbWUgQXBwaXVtIGAgK1xuICAgICAgICAgICAgICAgIGBmZWF0dXJlcyBtYXkgbm90IHdvcmsgYXMgZXhwZWN0ZWQgdW5sZXNzIHRoaXMgcHJvYmxlbSBpcyBgICtcbiAgICAgICAgICAgICAgICBgZml4ZWQuYCk7XG4gIH1cbn07XG5cbmhlbHBlcnMucHVzaFNldHRpbmdzQXBwID0gYXN5bmMgZnVuY3Rpb24gKGFkYiwgdGhyb3dFcnJvciA9IGZhbHNlKSB7XG4gIGxvZ2dlci5kZWJ1ZyhcIlB1c2hpbmcgc2V0dGluZ3MgYXBrIHRvIGRldmljZS4uLlwiKTtcblxuICBhd2FpdCBoZWxwZXJzLmluc3RhbGxIZWxwZXJBcHAoYWRiLCBzZXR0aW5nc0Fwa1BhdGgsIFNFVFRJTkdTX0hFTFBFUl9QS0dfSUQsICdTZXR0aW5ncycpO1xuXG4gIC8vIFJlaW5zdGFsbCB3aWxsIHN0b3AgdGhlIHNldHRpbmdzIGhlbHBlciBwcm9jZXNzIGFueXdheSwgc29cbiAgLy8gdGhlcmUgaXMgbm8gbmVlZCB0byBjb250aW51ZSBpZiB0aGUgYXBwbGljYXRpb24gaXMgc3RpbGwgcnVubmluZ1xuICBpZiAoYXdhaXQgYWRiLnByb2Nlc3NFeGlzdHMoU0VUVElOR1NfSEVMUEVSX1BLR19JRCkpIHtcbiAgICBsb2dnZXIuZGVidWcoYCR7U0VUVElOR1NfSEVMUEVSX1BLR19JRH0gaXMgYWxyZWFkeSBydW5uaW5nLiBgICtcbiAgICAgIGBUaGVyZSBpcyBubyBuZWVkIHRvIHJlc2V0IGl0cyBwZXJtaXNzaW9ucy5gKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoYXdhaXQgYWRiLmdldEFwaUxldmVsKCkgPCAyMykgeyAvLyBBbmRyb2lkIDYtIGRldmljZXMgc2hvdWxkIGhhdmUgZ3JhbnRlZCBwZXJtaXNzaW9uc1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vYXBwaXVtL3B1bGwvMTE2NDAjaXNzdWVjb21tZW50LTQzODI2MDQ3N1xuICAgIGxvZ2dlci5pbmZvKCdHcmFudGluZyBhbmRyb2lkLnBlcm1pc3Npb24uU0VUX0FOSU1BVElPTl9TQ0FMRSwgQ0hBTkdFX0NPTkZJR1VSQVRJT04sIEFDQ0VTU19GSU5FX0xPQ0FUSU9OIGJ5IHBtIGdyYW50Jyk7XG4gICAgYXdhaXQgYWRiLmdyYW50UGVybWlzc2lvbnMoU0VUVElOR1NfSEVMUEVSX1BLR19JRCwgW1xuICAgICAgJ2FuZHJvaWQucGVybWlzc2lvbi5TRVRfQU5JTUFUSU9OX1NDQUxFJyxcbiAgICAgICdhbmRyb2lkLnBlcm1pc3Npb24uQ0hBTkdFX0NPTkZJR1VSQVRJT04nLFxuICAgICAgJ2FuZHJvaWQucGVybWlzc2lvbi5BQ0NFU1NfRklORV9MT0NBVElPTidcbiAgICBdKTtcbiAgfVxuXG4gIC8vIGxhdW5jaCBpby5hcHBpdW0uc2V0dGluZ3MgYXBwIGR1ZSB0byBzZXR0aW5ncyBmYWlsaW5nIHRvIGJlIHNldFxuICAvLyBpZiB0aGUgYXBwIGlzIG5vdCBsYXVuY2hlZCBwcmlvciB0byBzdGFydCB0aGUgc2Vzc2lvbiBvbiBhbmRyb2lkIDcrXG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXBwaXVtL2FwcGl1bS9pc3N1ZXMvODk1N1xuICB0cnkge1xuICAgIGF3YWl0IGFkYi5zdGFydEFwcCh7XG4gICAgICBwa2c6IFNFVFRJTkdTX0hFTFBFUl9QS0dfSUQsXG4gICAgICBhY3Rpdml0eTogU0VUVElOR1NfSEVMUEVSX01BSU5fQUNUSVZJVFksXG4gICAgICBhY3Rpb246IFwiYW5kcm9pZC5pbnRlbnQuYWN0aW9uLk1BSU5cIixcbiAgICAgIGNhdGVnb3J5OiBcImFuZHJvaWQuaW50ZW50LmNhdGVnb3J5LkxBVU5DSEVSXCIsXG4gICAgICBmbGFnczogXCIweDEwMjAwMDAwXCIsXG4gICAgICBzdG9wQXBwOiBmYWxzZSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBsYXVuY2ggc2V0dGluZ3MgYXBwOiAke2Vyci5tZXNzYWdlfWApO1xuICAgIGlmICh0aHJvd0Vycm9yKSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEV4dHJhY3RzIHN0cmluZy54bWwgYW5kIGNvbnZlcnRzIGl0IHRvIHN0cmluZy5qc29uIGFuZCBwdXNoZXNcbiAqIGl0IHRvIC9kYXRhL2xvY2FsL3RtcC9zdHJpbmcuanNvbiBvbiBmb3IgdXNlIG9mIGJvb3RzdHJhcFxuICogSWYgYXBwIGlzIG5vdCBwcmVzZW50IHRvIGV4dHJhY3Qgc3RyaW5nLnhtbCBpdCBkZWxldGVzIHJlbW90ZSBzdHJpbmdzLmpzb25cbiAqIElmIGFwcCBkb2VzIG5vdCBoYXZlIHN0cmluZ3MueG1sIHdlIHB1c2ggYW4gZW1wdHkganNvbiBvYmplY3QgdG8gcmVtb3RlXG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSBsYW5ndWFnZSAtIExhbmd1YWdlIGFiYnJldmlhdGlvbiwgZm9yIGV4YW1wbGUgJ2ZyJy4gVGhlIGRlZmF1bHQgbGFuZ3VhZ2VcbiAqIGlzIHVzZWQgaWYgdGhpcyBhcmd1bWVudCBpcyBub3QgZGVmaW5lZC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBhZGIgLSBUaGUgYWRiIG1vZHVsZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gRHJpdmVyIG9wdGlvbnMgZGljdGlvbmFyeS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBkaWN0aW9uYXJ5LCB3aGVyZSBzdHJpbmcgcmVzb3VyY2UgaWRlbnRpZmllcnMgYXJlIGtleXNcbiAqIGFsb25nIHdpdGggdGhlaXIgY29ycmVzcG9uZGluZyB2YWx1ZXMgZm9yIHRoZSBnaXZlbiBsYW5ndWFnZSBvciBhbiBlbXB0eSBvYmplY3RcbiAqIGlmIG5vIG1hdGNoaW5nIHJlc291cmNlcyB3ZXJlIGV4dHJhY3RlZC5cbiAqL1xuaGVscGVycy5wdXNoU3RyaW5ncyA9IGFzeW5jIGZ1bmN0aW9uIChsYW5ndWFnZSwgYWRiLCBvcHRzKSB7XG4gIGNvbnN0IHJlbW90ZURpciA9ICcvZGF0YS9sb2NhbC90bXAnO1xuICBjb25zdCBzdHJpbmdzSnNvbiA9ICdzdHJpbmdzLmpzb24nO1xuICBjb25zdCByZW1vdGVGaWxlID0gcGF0aC5wb3NpeC5yZXNvbHZlKHJlbW90ZURpciwgc3RyaW5nc0pzb24pO1xuXG4gIC8vIGNsZWFuIHVwIHJlbW90ZSBzdHJpbmcuanNvbiBpZiBwcmVzZW50XG4gIGF3YWl0IGFkYi5yaW1yYWYocmVtb3RlRmlsZSk7XG5cbiAgbGV0IGFwcDtcbiAgdHJ5IHtcbiAgICBhcHAgPSBvcHRzLmFwcCB8fCBhd2FpdCBhZGIucHVsbEFwayhvcHRzLmFwcFBhY2thZ2UsIG9wdHMudG1wRGlyKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nZ2VyLmluZm8oYEZhaWxlZCB0byBwdWxsIGFuIGFwayBmcm9tICcke29wdHMuYXBwUGFja2FnZX0nIHRvICcke29wdHMudG1wRGlyfScuIE9yaWdpbmFsIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG5cbiAgaWYgKF8uaXNFbXB0eShvcHRzLmFwcFBhY2thZ2UpIHx8ICEoYXdhaXQgZnMuZXhpc3RzKGFwcCkpKSB7XG4gICAgbG9nZ2VyLmRlYnVnKGBObyBhcHAgb3IgcGFja2FnZSBzcGVjaWZpZWQuIFJldHVybmluZyBlbXB0eSBzdHJpbmdzYCk7XG4gICAgcmV0dXJuIHt9O1xuICB9XG5cbiAgY29uc3Qgc3RyaW5nc1RtcERpciA9IHBhdGgucmVzb2x2ZShvcHRzLnRtcERpciwgb3B0cy5hcHBQYWNrYWdlKTtcbiAgdHJ5IHtcbiAgICBsb2dnZXIuZGVidWcoJ0V4dHJhY3Rpbmcgc3RyaW5ncyBmcm9tIGFwaycsIGFwcCwgbGFuZ3VhZ2UsIHN0cmluZ3NUbXBEaXIpO1xuICAgIGNvbnN0IHthcGtTdHJpbmdzLCBsb2NhbFBhdGh9ID0gYXdhaXQgYWRiLmV4dHJhY3RTdHJpbmdzRnJvbUFwayhhcHAsIGxhbmd1YWdlLCBzdHJpbmdzVG1wRGlyKTtcbiAgICBhd2FpdCBhZGIucHVzaChsb2NhbFBhdGgsIHJlbW90ZURpcik7XG4gICAgcmV0dXJuIGFwa1N0cmluZ3M7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZ2dlci53YXJuKGBDb3VsZCBub3QgZ2V0IHN0cmluZ3MsIGNvbnRpbnVpbmcgYW55d2F5LiBPcmlnaW5hbCBlcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcbiAgICBhd2FpdCBhZGIuc2hlbGwoJ2VjaG8nLCBbYCd7fScgPiAke3JlbW90ZUZpbGV9YF0pO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IGZzLnJpbXJhZihzdHJpbmdzVG1wRGlyKTtcbiAgfVxuICByZXR1cm4ge307XG59O1xuXG5oZWxwZXJzLnVubG9ja1dpdGhVSUF1dG9tYXRpb24gPSBhc3luYyBmdW5jdGlvbiAoZHJpdmVyLCBhZGIsIHVubG9ja0NhcGFiaWxpdGllcykge1xuICBsZXQgdW5sb2NrVHlwZSA9IHVubG9ja0NhcGFiaWxpdGllcy51bmxvY2tUeXBlO1xuICBpZiAoIXVubG9ja2VyLmlzVmFsaWRVbmxvY2tUeXBlKHVubG9ja1R5cGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHVubG9jayB0eXBlICR7dW5sb2NrVHlwZX1gKTtcbiAgfVxuICBsZXQgdW5sb2NrS2V5ID0gdW5sb2NrQ2FwYWJpbGl0aWVzLnVubG9ja0tleTtcbiAgaWYgKCF1bmxvY2tlci5pc1ZhbGlkS2V5KHVubG9ja1R5cGUsIHVubG9ja0tleSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgdW5sb2NrS2V5ICR7dW5sb2NrS2V5fSBjYXBhYmlsaXR5IGZvciB1bmxvY2tUeXBlICR7dW5sb2NrVHlwZX1gKTtcbiAgfVxuICBjb25zdCB1bmxvY2tNZXRob2QgPSB7XG4gICAgW1BJTl9VTkxPQ0tdOiB1bmxvY2tlci5waW5VbmxvY2ssXG4gICAgW1BBU1NXT1JEX1VOTE9DS106IHVubG9ja2VyLnBhc3N3b3JkVW5sb2NrLFxuICAgIFtQQVRURVJOX1VOTE9DS106IHVubG9ja2VyLnBhdHRlcm5VbmxvY2ssXG4gICAgW0ZJTkdFUlBSSU5UX1VOTE9DS106IHVubG9ja2VyLmZpbmdlcnByaW50VW5sb2NrXG4gIH1bdW5sb2NrVHlwZV07XG4gIGF3YWl0IHVubG9ja01ldGhvZChhZGIsIGRyaXZlciwgdW5sb2NrQ2FwYWJpbGl0aWVzKTtcbn07XG5cbmhlbHBlcnMudW5sb2NrV2l0aEhlbHBlckFwcCA9IGFzeW5jIGZ1bmN0aW9uIChhZGIpIHtcbiAgbG9nZ2VyLmluZm8oXCJVbmxvY2tpbmcgc2NyZWVuXCIpO1xuXG4gIC8vIFVubG9jayBzdWNjZWVkIHdpdGggYSBjb3VwbGUgb2YgcmV0cmllcy5cbiAgbGV0IGZpcnN0UnVuID0gdHJ1ZTtcbiAgYXdhaXQgcmV0cnkoMywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIC8vIFRvIHJlZHVjZSBhIHRpbWUgdG8gY2FsbCBhZGIuaXNTY3JlZW5Mb2NrZWQoKSBzaW5jZSBgYWRiIHNoZWxsIGR1bXBzeXMgd2luZG93YCBpcyBlYXN5IHRvIGhhbmcgYWRiIGNvbW1hbmRzXG4gICAgaWYgKGZpcnN0UnVuKSB7XG4gICAgICBmaXJzdFJ1biA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIShhd2FpdCBhZGIuaXNTY3JlZW5Mb2NrZWQoKSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oYEVycm9yIGluIGlzU2NyZWVuTG9ja2VkOiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJcXFwiYWRiIHNoZWxsIGR1bXBzeXMgd2luZG93XFxcIiBjb21tYW5kIGhhcyB0aW1lZCBvdXQuXCIpO1xuICAgICAgICBsb2dnZXIud2FybihcIlRoZSByZWFzb24gb2YgdGhpcyB0aW1lb3V0IGlzIHRoZSBkZWxheWVkIGFkYiByZXNwb25zZS4gUmVzZXR0aW5nIGFkYiBzZXJ2ZXIgY2FuIGltcHJvdmUgaXQuXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxvZ2dlci5pbmZvKGBMYXVuY2hpbmcgJHtTRVRUSU5HU19IRUxQRVJfVU5MT0NLX0FDVElWSVRZfWApO1xuICAgIGF3YWl0IGFkYi5zaGVsbChbXG4gICAgICAnYW0nLCAnc3RhcnQnLFxuICAgICAgJy1uJywgYCR7U0VUVElOR1NfSEVMUEVSX1BLR19JRH0vJHtTRVRUSU5HU19IRUxQRVJfVU5MT0NLX0FDVElWSVRZfWAsXG4gICAgICAnLWMnLCAnYW5kcm9pZC5pbnRlbnQuY2F0ZWdvcnkuTEFVTkNIRVInLFxuICAgICAgJy1hJywgJ2FuZHJvaWQuaW50ZW50LmFjdGlvbi5NQUlOJyxcbiAgICAgICctZicsICcweDEwMjAwMDAwJyxcbiAgICBdKTtcbiAgICBhd2FpdCBCLmRlbGF5KDEwMDApO1xuICB9KTtcbn07XG5cbmhlbHBlcnMudW5sb2NrID0gYXN5bmMgZnVuY3Rpb24gKGRyaXZlciwgYWRiLCBjYXBhYmlsaXRpZXMpIHtcbiAgaWYgKCEoYXdhaXQgYWRiLmlzU2NyZWVuTG9ja2VkKCkpKSB7XG4gICAgbG9nZ2VyLmluZm8oXCJTY3JlZW4gYWxyZWFkeSB1bmxvY2tlZCwgZG9pbmcgbm90aGluZ1wiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBsb2dnZXIuZGVidWcoXCJTY3JlZW4gaXMgbG9ja2VkLCB0cnlpbmcgdG8gdW5sb2NrXCIpO1xuICBpZiAoXy5pc1VuZGVmaW5lZChjYXBhYmlsaXRpZXMudW5sb2NrVHlwZSkpIHtcbiAgICBsb2dnZXIud2FybihcIlVzaW5nIGFwcCB1bmxvY2ssIHRoaXMgaXMgZ29pbmcgdG8gYmUgZGVwcmVjYXRlZCFcIik7XG4gICAgYXdhaXQgaGVscGVycy51bmxvY2tXaXRoSGVscGVyQXBwKGFkYik7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgaGVscGVycy51bmxvY2tXaXRoVUlBdXRvbWF0aW9uKGRyaXZlciwgYWRiLCB7dW5sb2NrVHlwZTogY2FwYWJpbGl0aWVzLnVubG9ja1R5cGUsIHVubG9ja0tleTogY2FwYWJpbGl0aWVzLnVubG9ja0tleX0pO1xuICAgIGF3YWl0IGhlbHBlcnMudmVyaWZ5VW5sb2NrKGFkYik7XG4gIH1cbn07XG5cbmhlbHBlcnMudmVyaWZ5VW5sb2NrID0gYXN5bmMgZnVuY3Rpb24gKGFkYikge1xuICBhd2FpdCByZXRyeUludGVydmFsKDIsIDEwMDAsIGFzeW5jICgpID0+IHtcbiAgICBpZiAoYXdhaXQgYWRiLmlzU2NyZWVuTG9ja2VkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNjcmVlbiBkaWQgbm90IHVubG9jayBzdWNjZXNzZnVsbHksIHJldHJ5aW5nXCIpO1xuICAgIH1cbiAgICBsb2dnZXIuZGVidWcoXCJTY3JlZW4gdW5sb2NrZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICB9KTtcbn07XG5cbmhlbHBlcnMuaW5pdERldmljZSA9IGFzeW5jIGZ1bmN0aW9uIChhZGIsIG9wdHMpIHtcbiAgYXdhaXQgYWRiLndhaXRGb3JEZXZpY2UoKTtcbiAgLy8gcHVzaFNldHRpbmdzQXBwIHJlcXVpcmVkIGJlZm9yZSBjYWxsaW5nIGVuc3VyZURldmljZUxvY2FsZSBmb3IgQVBJIExldmVsIDI0K1xuICBhd2FpdCBoZWxwZXJzLnB1c2hTZXR0aW5nc0FwcChhZGIpO1xuICBpZiAoIW9wdHMuYXZkKSB7XG4gICAgYXdhaXQgaGVscGVycy5zZXRNb2NrTG9jYXRpb25BcHAoYWRiLCBTRVRUSU5HU19IRUxQRVJfUEtHX0lEKTtcbiAgfVxuXG4gIGF3YWl0IGhlbHBlcnMuZW5zdXJlRGV2aWNlTG9jYWxlKGFkYiwgb3B0cy5sYW5ndWFnZSwgb3B0cy5sb2NhbGUsIG9wdHMubG9jYWxlU2NyaXB0KTtcbiAgYXdhaXQgYWRiLnN0YXJ0TG9nY2F0KCk7XG4gIGlmIChvcHRzLnVuaWNvZGVLZXlib2FyZCkge1xuICAgIHJldHVybiBhd2FpdCBoZWxwZXJzLmluaXRVbmljb2RlS2V5Ym9hcmQoYWRiKTtcbiAgfVxufTtcblxuaGVscGVycy5yZW1vdmVOdWxsUHJvcGVydGllcyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgZm9yIChsZXQga2V5IG9mIF8ua2V5cyhvYmopKSB7XG4gICAgaWYgKF8uaXNOdWxsKG9ialtrZXldKSB8fCBfLmlzVW5kZWZpbmVkKG9ialtrZXldKSkge1xuICAgICAgZGVsZXRlIG9ialtrZXldO1xuICAgIH1cbiAgfVxufTtcblxuaGVscGVycy50cnVuY2F0ZURlY2ltYWxzID0gZnVuY3Rpb24gKG51bWJlciwgZGlnaXRzKSB7XG4gIGxldCBtdWx0aXBsaWVyID0gTWF0aC5wb3coMTAsIGRpZ2l0cyksXG4gICAgICBhZGp1c3RlZE51bSA9IG51bWJlciAqIG11bHRpcGxpZXIsXG4gICAgICB0cnVuY2F0ZWROdW0gPSBNYXRoW2FkanVzdGVkTnVtIDwgMCA/ICdjZWlsJyA6ICdmbG9vciddKGFkanVzdGVkTnVtKTtcblxuICByZXR1cm4gdHJ1bmNhdGVkTnVtIC8gbXVsdGlwbGllcjtcbn07XG5cbmhlbHBlcnMuaXNDaHJvbWVCcm93c2VyID0gZnVuY3Rpb24gKGJyb3dzZXIpIHtcbiAgcmV0dXJuIF8uaW5jbHVkZXMoT2JqZWN0LmtleXMoQ0hST01FX0JST1dTRVJfUEFDS0FHRV9BQ1RJVklUWSksIChicm93c2VyIHx8ICcnKS50b0xvd2VyQ2FzZSgpKTtcbn07XG5cbmhlbHBlcnMuZ2V0Q2hyb21lUGtnID0gZnVuY3Rpb24gKGJyb3dzZXIpIHtcbiAgcmV0dXJuIENIUk9NRV9CUk9XU0VSX1BBQ0tBR0VfQUNUSVZJVFlbYnJvd3Nlci50b0xvd2VyQ2FzZSgpXSB8fCBDSFJPTUVfQlJPV1NFUl9QQUNLQUdFX0FDVElWSVRZLmRlZmF1bHQ7XG59O1xuXG5oZWxwZXJzLnJlbW92ZUFsbFNlc3Npb25XZWJTb2NrZXRIYW5kbGVycyA9IGFzeW5jIGZ1bmN0aW9uIChzZXJ2ZXIsIHNlc3Npb25JZCkge1xuICBpZiAoIXNlcnZlciB8fCAhXy5pc0Z1bmN0aW9uKHNlcnZlci5nZXRXZWJTb2NrZXRIYW5kbGVycykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBhY3RpdmVIYW5kbGVycyA9IGF3YWl0IHNlcnZlci5nZXRXZWJTb2NrZXRIYW5kbGVycyhzZXNzaW9uSWQpO1xuICBmb3IgKGNvbnN0IHBhdGhuYW1lIG9mIF8ua2V5cyhhY3RpdmVIYW5kbGVycykpIHtcbiAgICBhd2FpdCBzZXJ2ZXIucmVtb3ZlV2ViU29ja2V0SGFuZGxlcihwYXRobmFtZSk7XG4gIH1cbn07XG5cbi8qKlxuICogVGFrZXMgYSBkZXNpcmVkIGNhcGFiaWxpdHkgYW5kIHRyaWVzIHRvIEpTT04ucGFyc2UgaXQgYXMgYW4gYXJyYXksXG4gKiBhbmQgZWl0aGVyIHJldHVybnMgdGhlIHBhcnNlZCBhcnJheSBvciBhIHNpbmdsZXRvbiBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge2FueX0gY2FwIEEgZGVzaXJlZCBjYXBhYmlsaXR5XG4gKi9cbmhlbHBlcnMucGFyc2VBcnJheSA9IGZ1bmN0aW9uIChjYXApIHtcbiAgbGV0IHBhcnNlZENhcHM7XG4gIHRyeSB7XG4gICAgcGFyc2VkQ2FwcyA9IEpTT04ucGFyc2UoY2FwKTtcbiAgfSBjYXRjaCAoaWduKSB7IH1cblxuICBpZiAoXy5pc0FycmF5KHBhcnNlZENhcHMpKSB7XG4gICAgcmV0dXJuIHBhcnNlZENhcHM7XG4gIH0gZWxzZSBpZiAoXy5pc1N0cmluZyhjYXApKSB7XG4gICAgcmV0dXJuIFtjYXBdO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKGBtdXN0IHByb3ZpZGUgYSBzdHJpbmcgb3IgSlNPTiBBcnJheTsgcmVjZWl2ZWQgJHtjYXB9YCk7XG59O1xuXG5oZWxwZXJzLnZhbGlkYXRlRGVzaXJlZENhcHMgPSBmdW5jdGlvbiAoY2Fwcykge1xuICAvLyBtYWtlIHN1cmUgdGhhdCB0aGUgY2FwYWJpbGl0aWVzIGhhdmUgb25lIG9mIGBhcHBgLCBgYXBwUGFja2FnZWAgb3IgYGJyb3dzZXJgXG4gIGlmICgoIWNhcHMuYnJvd3Nlck5hbWUgfHwgIXRoaXMuaXNDaHJvbWVCcm93c2VyKGNhcHMuYnJvd3Nlck5hbWUpKSAmJiAhY2Fwcy5hcHAgJiYgIWNhcHMuYXBwUGFja2FnZSkge1xuICAgIGxvZ2dlci5lcnJvckFuZFRocm93KCdUaGUgZGVzaXJlZCBjYXBhYmlsaXRpZXMgbXVzdCBpbmNsdWRlIGVpdGhlciBhbiBhcHAsIGFwcFBhY2thZ2Ugb3IgYnJvd3Nlck5hbWUnKTtcbiAgfVxuICBpZiAoY2Fwcy5icm93c2VyTmFtZSkge1xuICAgIGlmIChjYXBzLmFwcCkge1xuICAgICAgLy8gd2FybiBpZiB0aGUgY2FwYWJpbGl0aWVzIGhhdmUgYm90aCBgYXBwYCBhbmQgYGJyb3dzZXIsIGFsdGhvdWdoIHRoaXMgaXMgY29tbW9uIHdpdGggc2VsZW5pdW0gZ3JpZFxuICAgICAgbG9nZ2VyLndhcm4oYFRoZSBkZXNpcmVkIGNhcGFiaWxpdGllcyBzaG91bGQgZ2VuZXJhbGx5IG5vdCBpbmNsdWRlIGJvdGggYW4gJ2FwcCcgYW5kIGEgJ2Jyb3dzZXJOYW1lJ2ApO1xuICAgIH1cbiAgICBpZiAoY2Fwcy5hcHBQYWNrYWdlKSB7XG4gICAgICBsb2dnZXIuZXJyb3JBbmRUaHJvdyhgVGhlIGRlc2lyZWQgc2hvdWxkIG5vdCBpbmNsdWRlIGJvdGggb2YgYW4gJ2FwcFBhY2thZ2UnIGFuZCBhICdicm93c2VyTmFtZSdgKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmhlbHBlcnMuYm9vdHN0cmFwID0gQm9vdHN0cmFwO1xuaGVscGVycy51bmxvY2tlciA9IHVubG9ja2VyO1xuXG5leHBvcnQgeyBoZWxwZXJzIH07XG5leHBvcnQgZGVmYXVsdCBoZWxwZXJzO1xuIl0sImZpbGUiOiJsaWIvYW5kcm9pZC1oZWxwZXJzLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uIn0=
