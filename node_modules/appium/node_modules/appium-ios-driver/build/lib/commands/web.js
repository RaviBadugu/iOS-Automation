"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.helpers = exports.commands = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _lodash = _interopRequireDefault(require("lodash"));

var _bluebird = _interopRequireDefault(require("bluebird"));

var _appiumBaseDriver = require("appium-base-driver");

var _cookies = _interopRequireDefault(require("../cookies"));

var _logger = _interopRequireDefault(require("../logger"));

let commands = {},
    helpers = {},
    extensions = {};
exports.helpers = helpers;
exports.commands = commands;
const ELEMENT_OFFSET = 5000;

commands.setFrame = function () {
  var _ref = (0, _asyncToGenerator2.default)(function* (frame) {
    if (!this.isWebContext()) {
      frame = frame ? frame : 'target.frontMostApp()';
      let command = `wd_frame = ${frame}`;
      return yield this.uiAutoClient.sendCommand(command);
    }

    let atom;

    if (_lodash.default.isNull(frame)) {
      this.curWebFrames = [];

      _logger.default.debug('Leaving web frame and going back to default content');

      return;
    }

    if (!_lodash.default.isUndefined(frame.ELEMENT)) {
      let atomsElement = this.useAtomsElement(frame.ELEMENT);
      let value = yield this.executeAtom('get_frame_window', [atomsElement]);

      _logger.default.debug(`Entering new web frame: '${value.WINDOW}'`);

      this.curWebFrames.unshift(value.WINDOW);
    } else {
      atom = _lodash.default.isNumber(frame) ? 'frame_by_index' : 'frame_by_id_or_name';
      let value = yield this.executeAtom(atom, [frame]);

      if (_lodash.default.isNull(value) || _lodash.default.isUndefined(value.WINDOW)) {
        throw new _appiumBaseDriver.errors.NoSuchFrameError();
      }

      _logger.default.debug(`Entering new web frame: '${value.WINDOW}'`);

      this.curWebFrames.unshift(value.WINDOW);
    }
  });

  return function (_x) {
    return _ref.apply(this, arguments);
  };
}();

commands.getCssProperty = function () {
  var _ref2 = (0, _asyncToGenerator2.default)(function* (propertyName, el) {
    let atomsElement = this.useAtomsElement(el);
    return yield this.executeAtom('get_value_of_css_property', [atomsElement, propertyName]);
  });

  return function (_x2, _x3) {
    return _ref2.apply(this, arguments);
  };
}();

commands.submit = function () {
  var _ref3 = (0, _asyncToGenerator2.default)(function* (el) {
    if (this.isWebContext()) {
      let atomsElement = this.useAtomsElement(el);
      yield this.executeAtom('submit', [atomsElement]);
    } else {
      throw new _appiumBaseDriver.errors.NotImplementedError();
    }
  });

  return function (_x4) {
    return _ref3.apply(this, arguments);
  };
}();

commands.refresh = (0, _asyncToGenerator2.default)(function* () {
  if (this.isWebContext()) {
    yield this.executeAtom('refresh', []);
  } else {
    throw new _appiumBaseDriver.errors.NotImplementedError();
  }
});
commands.getUrl = (0, _asyncToGenerator2.default)(function* () {
  if (!this.isWebContext()) {
    throw new _appiumBaseDriver.errors.NotImplementedError();
  }

  let url = yield this.remote.execute('window.location.href');
  return url;
});
commands.title = (0, _asyncToGenerator2.default)(function* () {
  if (!this.isWebContext()) {
    throw new _appiumBaseDriver.errors.NotImplementedError();
  }

  return yield this.executeAtom('title', [], true);
});
commands.getCookies = (0, _asyncToGenerator2.default)(function* () {
  if (!this.isWebContext()) {
    throw new _appiumBaseDriver.errors.NotImplementedError();
  }

  _logger.default.debug('Retrieving all cookies');

  let script = 'return document.cookie';
  let jsCookies = yield this.executeAtom('execute_script', [script, []]);
  let cookies = [];

  try {
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = _lodash.default.toPairs(_cookies.default.createJWPCookie(undefined, jsCookies))[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        let _step$value = (0, _slicedToArray2.default)(_step.value, 2),
            name = _step$value[0],
            value = _step$value[1];

        cookies.push({
          name,
          value
        });
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return != null) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }

    return cookies;
  } catch (err) {
    _logger.default.error(err);

    throw new _appiumBaseDriver.errors.UnknownError(`Error parsing cookies from result: '${jsCookies}'`);
  }
});

commands.setCookie = function () {
  var _ref8 = (0, _asyncToGenerator2.default)(function* (cookie) {
    if (!this.isWebContext()) {
      throw new _appiumBaseDriver.errors.NotImplementedError();
    }

    cookie = _lodash.default.clone(cookie);

    if (!cookie.path) {
      cookie.path = "/";
    }

    let jsCookie = _cookies.default.createJSCookie(cookie.name, cookie.value, {
      expires: _lodash.default.isNumber(cookie.expiry) ? new Date(cookie.expiry * 1000).toUTCString() : cookie.expiry,
      path: cookie.path,
      domain: cookie.domain,
      httpOnly: cookie.httpOnly,
      secure: cookie.secure
    });

    let script = `document.cookie = ${JSON.stringify(jsCookie)}`;
    yield this.executeAtom('execute_script', [script, []]);
  });

  return function (_x5) {
    return _ref8.apply(this, arguments);
  };
}();

commands.deleteCookie = function () {
  var _ref9 = (0, _asyncToGenerator2.default)(function* (cookieName) {
    if (!this.isWebContext()) {
      throw new _appiumBaseDriver.errors.NotImplementedError();
    }

    let cookies = yield this.getCookies();

    if (_lodash.default.indexOf(_lodash.default.map(cookies, 'name'), cookieName) === -1) {
      _logger.default.debug(`Cookie '${cookieName}' not found. Ignoring.`);

      return true;
    }

    return yield this._deleteCookie(cookieName);
  });

  return function (_x6) {
    return _ref9.apply(this, arguments);
  };
}();

commands.deleteCookies = (0, _asyncToGenerator2.default)(function* () {
  if (!this.isWebContext()) {
    throw new _appiumBaseDriver.errors.NotImplementedError();
  }

  let cookies = yield this.getCookies();

  if (cookies.length) {
    var _iteratorNormalCompletion2 = true;
    var _didIteratorError2 = false;
    var _iteratorError2 = undefined;

    try {
      for (var _iterator2 = cookies[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
        let cookie = _step2.value;
        yield this._deleteCookie(cookie.name);
      }
    } catch (err) {
      _didIteratorError2 = true;
      _iteratorError2 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
          _iterator2.return();
        }
      } finally {
        if (_didIteratorError2) {
          throw _iteratorError2;
        }
      }
    }
  }

  return true;
});

helpers._deleteCookie = function () {
  var _ref11 = (0, _asyncToGenerator2.default)(function* (cookieName) {
    _logger.default.debug(`Deleting cookie '${cookieName}'`);

    let webCookie = _cookies.default.expireCookie(cookieName, {
      path: "/"
    });

    let script = `document.cookie = ${JSON.stringify(webCookie)}`;
    yield this.executeAtom('execute_script', [script, []]);
  });

  return function (_x7) {
    return _ref11.apply(this, arguments);
  };
}();

extensions.findWebElementOrElements = function () {
  var _ref12 = (0, _asyncToGenerator2.default)(function* (strategy, selector, many, ctx) {
    var _this = this;

    let atomsElement = this.getAtomsElement(ctx);
    let element;

    let doFind = function () {
      var _ref13 = (0, _asyncToGenerator2.default)(function* () {
        element = yield _this.executeAtom(`find_element${many ? 's' : ''}`, [strategy, selector, atomsElement]);
        return !_lodash.default.isNull(element);
      });

      return function doFind() {
        return _ref13.apply(this, arguments);
      };
    }();

    try {
      yield this.implicitWaitForCondition(doFind);
    } catch (err) {
      if (err.message && _lodash.default.isFunction(err.message.match) && err.message.match(/Condition unmet/)) {
        element = [];
      } else {
        throw err;
      }
    }

    if (many) {
      return element;
    } else {
      if (!element || _lodash.default.size(element) === 0) {
        throw new _appiumBaseDriver.errors.NoSuchElementError();
      }

      return element;
    }
  });

  return function (_x8, _x9, _x10, _x11) {
    return _ref12.apply(this, arguments);
  };
}();

extensions.webFlickElement = function () {
  var _ref14 = (0, _asyncToGenerator2.default)(function* (el, xoffset, yoffset) {
    let atomsElement = yield this.useAtomsElement(el);

    let _ref15 = yield this.executeAtom('get_top_left_coordinates', [atomsElement]),
        x = _ref15.x,
        y = _ref15.y;

    let _ref16 = yield this.executeAtom('get_size', [atomsElement]),
        width = _ref16.width,
        height = _ref16.height;

    x = x + width / 2;
    y = y + height / 2;
    let from = yield this.translateWebCoords({
      x,
      y
    });
    let to = yield this.translateWebCoords({
      x: x + xoffset,
      y: y + yoffset
    });
    let args = {
      from,
      to
    };
    let command = `au.flick(${JSON.stringify(args)})`;
    yield this.uiAutoClient.sendCommand(command);
  });

  return function (_x12, _x13, _x14) {
    return _ref14.apply(this, arguments);
  };
}();

extensions.mobileWebNav = function () {
  var _ref17 = (0, _asyncToGenerator2.default)(function* (navType) {
    this.remote.allowNavigationWithoutReload();
    yield this.executeAtom('execute_script', [`history.${navType}();`, null]);
  });

  return function (_x15) {
    return _ref17.apply(this, arguments);
  };
}();

extensions.nativeWebTap = function () {
  var _ref18 = (0, _asyncToGenerator2.default)(function* (el) {
    let atomsElement = this.useAtomsElement(el);

    let _ref19 = yield this.executeAtom('get_top_left_coordinates', [atomsElement]),
        x = _ref19.x,
        y = _ref19.y;

    let _ref20 = yield this.executeAtom('get_size', [atomsElement]),
        width = _ref20.width,
        height = _ref20.height;

    x = x + width / 2;
    y = y + height / 2 + (yield this.getExtraNativeWebTapOffset());
    this.curWebCoords = {
      x,
      y
    };
    yield this.clickWebCoords();
    yield _bluebird.default.delay(500);
  });

  return function (_x16) {
    return _ref18.apply(this, arguments);
  };
}();

extensions.getExtraNativeWebTapOffset = (0, _asyncToGenerator2.default)(function* () {
  return 0;
});
extensions.clickWebCoords = (0, _asyncToGenerator2.default)(function* () {
  let coords = yield this.translateWebCoords(this.curWebCoords);
  yield this.clickCoords(coords);
});

extensions.translateWebCoords = function () {
  var _ref23 = (0, _asyncToGenerator2.default)(function* (coords) {
    _logger.default.debug(`Translating coordinates (${JSON.stringify(coords)}) to web coordinates`);

    let wvCmd = 'au.getElementsByType(\'webview\')';
    let webviewIndex = this.webContextIndex();
    let yOffset = this.opts.curOrientation === 'LANDSCAPE' ? this.landscapeWebCoordsOffset : 0;
    let webviews = yield this.uiAutoClient.sendCommand(wvCmd);

    if (webviews.length < 1) {
      throw new _appiumBaseDriver.errors.UnknownError.code('Could not find any webviews to click inside!');
    }

    if (_lodash.default.isUndefined(webviews[webviewIndex])) {
      _logger.default.warn(`Could not find webview at index ${webviewIndex}, taking ` + `last available one for clicking purposes`);

      webviewIndex = webviews.length - 1;
    }

    let wvId = webviews[webviewIndex].ELEMENT;
    let locCmd = `au.getElement('${wvId}').rect()`;
    let rect = yield this.uiAutoClient.sendCommand(locCmd);
    let wvPos = {
      x: rect.origin.x,
      y: rect.origin.y
    };
    let realDims = {
      w: rect.size.width,
      h: rect.size.height
    };
    let cmd = '(function () { return {w: document.width, h: document.height}; })()';

    let _ref24 = yield this.remote.execute(cmd),
        w = _ref24.w,
        h = _ref24.h;

    let wvDims = {
      w,
      h
    };

    if (wvDims && realDims && wvPos) {
      let xRatio = realDims.w / wvDims.w;
      let yRatio = realDims.h / wvDims.h;
      let serviceBarHeight = 20;

      if (parseFloat(this.opts.platformVersion) >= 8) {
        serviceBarHeight = 0;
      }

      let newCoords = {
        x: wvPos.x + Math.round(xRatio * coords.x),
        y: wvPos.y + yOffset + Math.round(yRatio * coords.y) - serviceBarHeight
      };

      _logger.default.debug(`Converted web coords ${JSON.stringify(coords)} ` + `into real coords ${JSON.stringify(newCoords)}`);

      return newCoords;
    }
  });

  return function (_x17) {
    return _ref23.apply(this, arguments);
  };
}();

helpers.clickCoords = function () {
  var _ref25 = (0, _asyncToGenerator2.default)(function* (coords) {
    if (this.useRobot) {
      throw new _appiumBaseDriver.errors.NotYetImplementedError();
    } else {
      let opts = coords;
      opts.tapCount = 1;
      opts.duration = 0.3;
      opts.touchCount = 1;
      let command = `au.complexTap(${JSON.stringify(opts)})`;
      yield this.uiAutoClient.sendCommand(command);
    }
  });

  return function (_x18) {
    return _ref25.apply(this, arguments);
  };
}();

helpers.executeAtom = function () {
  var _ref26 = (0, _asyncToGenerator2.default)(function* (atom, args, alwaysDefaultFrame = false) {
    let frames = alwaysDefaultFrame === true ? [] : this.curWebFrames;
    let promise = this.remote.executeAtom(atom, args, frames);
    return yield this.waitForAtom(promise);
  });

  return function (_x19, _x20) {
    return _ref26.apply(this, arguments);
  };
}();

helpers.executeAtomAsync = function () {
  var _ref27 = (0, _asyncToGenerator2.default)(function* (atom, args, responseUrl) {
    let promise = new _bluebird.default((resolve, reject) => {
      this.asyncPromise = {
        resolve,
        reject
      };
    });
    yield this.remote.executeAtomAsync(atom, args, this.curWebFrames, responseUrl);
    return yield this.waitForAtom(promise);
  });

  return function (_x21, _x22, _x23) {
    return _ref27.apply(this, arguments);
  };
}();

helpers.waitForAtom = function () {
  var _ref28 = (0, _asyncToGenerator2.default)(function* (promise) {
    let done = false;
    let error = null;
    promise.then(res => {
      done = true;
      return res;
    }).catch(err => {
      _logger.default.debug(`Error received while executing atom: ${err.message}`);

      done = true;
      error = err;
    });

    for (let i = 0; i < 10; i++) {
      if (done) break;
      yield _bluebird.default.delay(500);
      if (done) break;

      if (yield this.checkForAlert()) {
        return '';
      }
    }

    let res = yield promise;

    if (error) {
      throw error;
    }

    return this.parseExecuteResponse(res);
  });

  return function (_x24) {
    return _ref28.apply(this, arguments);
  };
}();

helpers.checkForAlert = (0, _asyncToGenerator2.default)(function* () {
  if (!_lodash.default.isNull(this.uiAutoClient)) {
    _logger.default.debug('atom did not return yet, checking to see if ' + 'we are blocked by an alert');

    let present = yield this.uiAutoClient.sendCommand('au.alertIsPresent()');

    if (!present) {
      _logger.default.debug('No alert found.');
    } else {
      _logger.default.debug('Found an alert, returning control to client');
    }

    return present;
  }
});

helpers.getAtomsElement = function (wdId) {
  let atomsId;

  try {
    atomsId = this.webElementIds[parseInt(wdId, 10) - ELEMENT_OFFSET];
  } catch (e) {
    return null;
  }

  if (_lodash.default.isUndefined(atomsId)) {
    return null;
  }

  return {
    ELEMENT: atomsId
  };
};

helpers.useAtomsElement = function (el) {
  if (parseInt(el, 10) < ELEMENT_OFFSET) {
    _logger.default.debug(`Element with id '${el}' passed in for use with ` + `atoms, but it's out of our internal scope. Adding ${ELEMENT_OFFSET}.`);

    el = (parseInt(el, 10) + ELEMENT_OFFSET).toString();
  }

  let atomsElement = this.getAtomsElement(el);

  if (atomsElement === null) {
    throw new _appiumBaseDriver.errors.UnknownError(`Error converting element ID for using in WD atoms: '${el}'`);
  }

  return atomsElement;
};

helpers.convertElementsForAtoms = function (args = []) {
  let newArgs = [];
  var _iteratorNormalCompletion3 = true;
  var _didIteratorError3 = false;
  var _iteratorError3 = undefined;

  try {
    for (var _iterator3 = args[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
      let arg = _step3.value;

      if (!_lodash.default.isNull(arg) && !_lodash.default.isUndefined(arg.ELEMENT)) {
        let atomsElement = this.getAtomsElement(arg.ELEMENT);

        if (atomsElement === null) {
          throw new _appiumBaseDriver.errors.UnknownError(`Error converting element ID for using in WD atoms: '${arg.ELEMENT}'`);
        }

        newArgs.push(atomsElement);
      } else {
        newArgs.push(arg);
      }
    }
  } catch (err) {
    _didIteratorError3 = true;
    _iteratorError3 = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {
        _iterator3.return();
      }
    } finally {
      if (_didIteratorError3) {
        throw _iteratorError3;
      }
    }
  }

  return newArgs;
};

helpers.parseExecuteResponse = function (res) {
  if (_lodash.default.isNull(res) || _lodash.default.isUndefined(res)) return null;
  let wdElement = null;

  if (!_lodash.default.isArray(res)) {
    if (!_lodash.default.isUndefined(res.ELEMENT)) {
      wdElement = this.parseElementResponse(res);

      if (wdElement === null) {
        throw new _appiumBaseDriver.errors.UnknownError(`Error converting element ID atom for using in WD: '${res.ELEMENT}'`);
      }

      res = wdElement;
    }
  } else {
    let args = [];
    var _iteratorNormalCompletion4 = true;
    var _didIteratorError4 = false;
    var _iteratorError4 = undefined;

    try {
      for (var _iterator4 = res[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
        let arg = _step4.value;
        wdElement = arg;

        if (!_lodash.default.isNull(arg) && !_lodash.default.isUndefined(arg.ELEMENT)) {
          wdElement = this.parseElementResponse(arg);

          if (wdElement === null) {
            throw new _appiumBaseDriver.errors.UnknownError(`Error converting element ID atom for using in WD: '${arg.ELEMENT}'`);
          }

          args.push(wdElement);
        } else {
          args.push(arg);
        }
      }
    } catch (err) {
      _didIteratorError4 = true;
      _iteratorError4 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion4 && _iterator4.return != null) {
          _iterator4.return();
        }
      } finally {
        if (_didIteratorError4) {
          throw _iteratorError4;
        }
      }
    }

    res = args;
  }

  return res;
};

helpers.parseElementResponse = function (element) {
  let objId = element.ELEMENT;
  let clientId = (ELEMENT_OFFSET + this.webElementIds.length).toString();
  this.webElementIds.push(objId);
  return {
    ELEMENT: clientId
  };
};

Object.assign(extensions, commands, helpers);
var _default = extensions;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy93ZWIuanMiXSwibmFtZXMiOlsiY29tbWFuZHMiLCJoZWxwZXJzIiwiZXh0ZW5zaW9ucyIsIkVMRU1FTlRfT0ZGU0VUIiwic2V0RnJhbWUiLCJmcmFtZSIsImlzV2ViQ29udGV4dCIsImNvbW1hbmQiLCJ1aUF1dG9DbGllbnQiLCJzZW5kQ29tbWFuZCIsImF0b20iLCJfIiwiaXNOdWxsIiwiY3VyV2ViRnJhbWVzIiwibG9nZ2VyIiwiZGVidWciLCJpc1VuZGVmaW5lZCIsIkVMRU1FTlQiLCJhdG9tc0VsZW1lbnQiLCJ1c2VBdG9tc0VsZW1lbnQiLCJ2YWx1ZSIsImV4ZWN1dGVBdG9tIiwiV0lORE9XIiwidW5zaGlmdCIsImlzTnVtYmVyIiwiZXJyb3JzIiwiTm9TdWNoRnJhbWVFcnJvciIsImdldENzc1Byb3BlcnR5IiwicHJvcGVydHlOYW1lIiwiZWwiLCJzdWJtaXQiLCJOb3RJbXBsZW1lbnRlZEVycm9yIiwicmVmcmVzaCIsImdldFVybCIsInVybCIsInJlbW90ZSIsImV4ZWN1dGUiLCJ0aXRsZSIsImdldENvb2tpZXMiLCJzY3JpcHQiLCJqc0Nvb2tpZXMiLCJjb29raWVzIiwidG9QYWlycyIsImNvb2tpZVV0aWxzIiwiY3JlYXRlSldQQ29va2llIiwidW5kZWZpbmVkIiwibmFtZSIsInB1c2giLCJlcnIiLCJlcnJvciIsIlVua25vd25FcnJvciIsInNldENvb2tpZSIsImNvb2tpZSIsImNsb25lIiwicGF0aCIsImpzQ29va2llIiwiY3JlYXRlSlNDb29raWUiLCJleHBpcmVzIiwiZXhwaXJ5IiwiRGF0ZSIsInRvVVRDU3RyaW5nIiwiZG9tYWluIiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVsZXRlQ29va2llIiwiY29va2llTmFtZSIsImluZGV4T2YiLCJtYXAiLCJfZGVsZXRlQ29va2llIiwiZGVsZXRlQ29va2llcyIsImxlbmd0aCIsIndlYkNvb2tpZSIsImV4cGlyZUNvb2tpZSIsImZpbmRXZWJFbGVtZW50T3JFbGVtZW50cyIsInN0cmF0ZWd5Iiwic2VsZWN0b3IiLCJtYW55IiwiY3R4IiwiZ2V0QXRvbXNFbGVtZW50IiwiZWxlbWVudCIsImRvRmluZCIsImltcGxpY2l0V2FpdEZvckNvbmRpdGlvbiIsIm1lc3NhZ2UiLCJpc0Z1bmN0aW9uIiwibWF0Y2giLCJzaXplIiwiTm9TdWNoRWxlbWVudEVycm9yIiwid2ViRmxpY2tFbGVtZW50IiwieG9mZnNldCIsInlvZmZzZXQiLCJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0IiwiZnJvbSIsInRyYW5zbGF0ZVdlYkNvb3JkcyIsInRvIiwiYXJncyIsIm1vYmlsZVdlYk5hdiIsIm5hdlR5cGUiLCJhbGxvd05hdmlnYXRpb25XaXRob3V0UmVsb2FkIiwibmF0aXZlV2ViVGFwIiwiZ2V0RXh0cmFOYXRpdmVXZWJUYXBPZmZzZXQiLCJjdXJXZWJDb29yZHMiLCJjbGlja1dlYkNvb3JkcyIsIkIiLCJkZWxheSIsImNvb3JkcyIsImNsaWNrQ29vcmRzIiwid3ZDbWQiLCJ3ZWJ2aWV3SW5kZXgiLCJ3ZWJDb250ZXh0SW5kZXgiLCJ5T2Zmc2V0Iiwib3B0cyIsImN1ck9yaWVudGF0aW9uIiwibGFuZHNjYXBlV2ViQ29vcmRzT2Zmc2V0Iiwid2Vidmlld3MiLCJjb2RlIiwid2FybiIsInd2SWQiLCJsb2NDbWQiLCJyZWN0Iiwid3ZQb3MiLCJvcmlnaW4iLCJyZWFsRGltcyIsInciLCJoIiwiY21kIiwid3ZEaW1zIiwieFJhdGlvIiwieVJhdGlvIiwic2VydmljZUJhckhlaWdodCIsInBhcnNlRmxvYXQiLCJwbGF0Zm9ybVZlcnNpb24iLCJuZXdDb29yZHMiLCJNYXRoIiwicm91bmQiLCJ1c2VSb2JvdCIsIk5vdFlldEltcGxlbWVudGVkRXJyb3IiLCJ0YXBDb3VudCIsImR1cmF0aW9uIiwidG91Y2hDb3VudCIsImFsd2F5c0RlZmF1bHRGcmFtZSIsImZyYW1lcyIsInByb21pc2UiLCJ3YWl0Rm9yQXRvbSIsImV4ZWN1dGVBdG9tQXN5bmMiLCJyZXNwb25zZVVybCIsInJlc29sdmUiLCJyZWplY3QiLCJhc3luY1Byb21pc2UiLCJkb25lIiwidGhlbiIsInJlcyIsImNhdGNoIiwiaSIsImNoZWNrRm9yQWxlcnQiLCJwYXJzZUV4ZWN1dGVSZXNwb25zZSIsInByZXNlbnQiLCJ3ZElkIiwiYXRvbXNJZCIsIndlYkVsZW1lbnRJZHMiLCJwYXJzZUludCIsImUiLCJ0b1N0cmluZyIsImNvbnZlcnRFbGVtZW50c0ZvckF0b21zIiwibmV3QXJncyIsImFyZyIsIndkRWxlbWVudCIsImlzQXJyYXkiLCJwYXJzZUVsZW1lbnRSZXNwb25zZSIsIm9iaklkIiwiY2xpZW50SWQiLCJPYmplY3QiLCJhc3NpZ24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQSxJQUFJQSxRQUFRLEdBQUcsRUFBZjtBQUFBLElBQW1CQyxPQUFPLEdBQUcsRUFBN0I7QUFBQSxJQUFpQ0MsVUFBVSxHQUFHLEVBQTlDOzs7QUFFQSxNQUFNQyxjQUFjLEdBQUcsSUFBdkI7O0FBRUFILFFBQVEsQ0FBQ0ksUUFBVDtBQUFBLDZDQUFvQixXQUFnQkMsS0FBaEIsRUFBdUI7QUFDekMsUUFBSSxDQUFDLEtBQUtDLFlBQUwsRUFBTCxFQUEwQjtBQUN4QkQsTUFBQUEsS0FBSyxHQUFHQSxLQUFLLEdBQUdBLEtBQUgsR0FBVyx1QkFBeEI7QUFDQSxVQUFJRSxPQUFPLEdBQUksY0FBYUYsS0FBTSxFQUFsQztBQUNBLG1CQUFhLEtBQUtHLFlBQUwsQ0FBa0JDLFdBQWxCLENBQThCRixPQUE5QixDQUFiO0FBQ0Q7O0FBRUQsUUFBSUcsSUFBSjs7QUFDQSxRQUFJQyxnQkFBRUMsTUFBRixDQUFTUCxLQUFULENBQUosRUFBcUI7QUFDbkIsV0FBS1EsWUFBTCxHQUFvQixFQUFwQjs7QUFDQUMsc0JBQU9DLEtBQVAsQ0FBYSxxREFBYjs7QUFDQTtBQUNEOztBQUNELFFBQUksQ0FBQ0osZ0JBQUVLLFdBQUYsQ0FBY1gsS0FBSyxDQUFDWSxPQUFwQixDQUFMLEVB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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBZUxkLElBQUFBLEdBQUcsR0FBR3hELElBQU47QUFDRDs7QUFDRCxTQUFPd0QsR0FBUDtBQUNELENBOUJEOztBQWdDQTFKLE9BQU8sQ0FBQzJLLG9CQUFSLEdBQStCLFVBQVUzRixPQUFWLEVBQW1CO0FBQ2hELE1BQUk0RixLQUFLLEdBQUc1RixPQUFPLENBQUNoRSxPQUFwQjtBQUNBLE1BQUk2SixRQUFRLEdBQUcsQ0FBQzNLLGNBQWMsR0FBRyxLQUFLZ0ssYUFBTCxDQUFtQjNGLE1BQXJDLEVBQTZDOEYsUUFBN0MsRUFBZjtBQUNBLE9BQUtILGFBQUwsQ0FBbUJwSCxJQUFuQixDQUF3QjhILEtBQXhCO0FBQ0EsU0FBTztBQUFDNUosSUFBQUEsT0FBTyxFQUFFNko7QUFBVixHQUFQO0FBQ0QsQ0FMRDs7QUFRQUMsTUFBTSxDQUFDQyxNQUFQLENBQWM5SyxVQUFkLEVBQTBCRixRQUExQixFQUFvQ0MsT0FBcEM7ZUFFZUMsVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgeyBlcnJvcnMgfSBmcm9tICdhcHBpdW0tYmFzZS1kcml2ZXInO1xuaW1wb3J0IGNvb2tpZVV0aWxzIGZyb20gJy4uL2Nvb2tpZXMnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9sb2dnZXInO1xuXG5cbmxldCBjb21tYW5kcyA9IHt9LCBoZWxwZXJzID0ge30sIGV4dGVuc2lvbnMgPSB7fTtcblxuY29uc3QgRUxFTUVOVF9PRkZTRVQgPSA1MDAwO1xuXG5jb21tYW5kcy5zZXRGcmFtZSA9IGFzeW5jIGZ1bmN0aW9uIChmcmFtZSkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICBmcmFtZSA9IGZyYW1lID8gZnJhbWUgOiAndGFyZ2V0LmZyb250TW9zdEFwcCgpJztcbiAgICBsZXQgY29tbWFuZCA9IGB3ZF9mcmFtZSA9ICR7ZnJhbWV9YDtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51aUF1dG9DbGllbnQuc2VuZENvbW1hbmQoY29tbWFuZCk7XG4gIH1cblxuICBsZXQgYXRvbTtcbiAgaWYgKF8uaXNOdWxsKGZyYW1lKSkge1xuICAgIHRoaXMuY3VyV2ViRnJhbWVzID0gW107XG4gICAgbG9nZ2VyLmRlYnVnKCdMZWF2aW5nIHdlYiBmcmFtZSBhbmQgZ29pbmcgYmFjayB0byBkZWZhdWx0IGNvbnRlbnQnKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCFfLmlzVW5kZWZpbmVkKGZyYW1lLkVMRU1FTlQpKSB7XG4gICAgbGV0IGF0b21zRWxlbWVudCA9IHRoaXMudXNlQXRvbXNFbGVtZW50KGZyYW1lLkVMRU1FTlQpO1xuICAgIGxldCB2YWx1ZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2dldF9mcmFtZV93aW5kb3cnLCBbYXRvbXNFbGVtZW50XSk7XG4gICAgbG9nZ2VyLmRlYnVnKGBFbnRlcmluZyBuZXcgd2ViIGZyYW1lOiAnJHt2YWx1ZS5XSU5ET1d9J2ApO1xuICAgIHRoaXMuY3VyV2ViRnJhbWVzLnVuc2hpZnQodmFsdWUuV0lORE9XKTtcbiAgfSBlbHNlIHtcbiAgICBhdG9tID0gXy5pc051bWJlcihmcmFtZSkgPyAnZnJhbWVfYnlfaW5kZXgnIDogJ2ZyYW1lX2J5X2lkX29yX25hbWUnO1xuICAgIGxldCB2YWx1ZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oYXRvbSwgW2ZyYW1lXSk7XG4gICAgaWYgKF8uaXNOdWxsKHZhbHVlKSB8fCBfLmlzVW5kZWZpbmVkKHZhbHVlLldJTkRPVykpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuTm9TdWNoRnJhbWVFcnJvcigpO1xuICAgIH1cbiAgICBsb2dnZXIuZGVidWcoYEVudGVyaW5nIG5ldyB3ZWIgZnJhbWU6ICcke3ZhbHVlLldJTkRPV30nYCk7XG4gICAgdGhpcy5jdXJXZWJGcmFtZXMudW5zaGlmdCh2YWx1ZS5XSU5ET1cpO1xuICB9XG59O1xuXG5jb21tYW5kcy5nZXRDc3NQcm9wZXJ0eSA9IGFzeW5jIGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUsIGVsKSB7XG4gIGxldCBhdG9tc0VsZW1lbnQgPSB0aGlzLnVzZUF0b21zRWxlbWVudChlbCk7XG4gIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCdnZXRfdmFsdWVfb2ZfY3NzX3Byb3BlcnR5JywgW2F0b21zRWxlbWVudCwgcHJvcGVydHlOYW1lXSk7XG59O1xuXG5jb21tYW5kcy5zdWJtaXQgPSBhc3luYyBmdW5jdGlvbiAoZWwpIHtcbiAgaWYgKHRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICBsZXQgYXRvbXNFbGVtZW50ID0gdGhpcy51c2VBdG9tc0VsZW1lbnQoZWwpO1xuICAgIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ3N1Ym1pdCcsIFthdG9tc0VsZW1lbnRdKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxufTtcblxuY29tbWFuZHMucmVmcmVzaCA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCdyZWZyZXNoJywgW10pO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG59O1xuXG5jb21tYW5kcy5nZXRVcmwgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG4gIGxldCB1cmwgPSBhd2FpdCB0aGlzLnJlbW90ZS5leGVjdXRlKCd3aW5kb3cubG9jYXRpb24uaHJlZicpO1xuICByZXR1cm4gdXJsO1xufTtcblxuY29tbWFuZHMudGl0bGUgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG4gIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCd0aXRsZScsIFtdLCB0cnVlKTtcbn07XG5cbmNvbW1hbmRzLmdldENvb2tpZXMgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgbG9nZ2VyLmRlYnVnKCdSZXRyaWV2aW5nIGFsbCBjb29raWVzJyk7XG5cbiAgbGV0IHNjcmlwdCA9ICdyZXR1cm4gZG9jdW1lbnQuY29va2llJztcbiAgbGV0IGpzQ29va2llcyA9IGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW3NjcmlwdCwgW11dKTtcblxuICBsZXQgY29va2llcyA9IFtdO1xuICB0cnkge1xuICAgIGZvciAobGV0IFtuYW1lLCB2YWx1ZV0gb2YgXy50b1BhaXJzKGNvb2tpZVV0aWxzLmNyZWF0ZUpXUENvb2tpZSh1bmRlZmluZWQsIGpzQ29va2llcykpKSB7XG4gICAgICBjb29raWVzLnB1c2goe25hbWUsIHZhbHVlfSk7XG4gICAgfVxuICAgIHJldHVybiBjb29raWVzO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2dnZXIuZXJyb3IoZXJyKTtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLlVua25vd25FcnJvcihgRXJyb3IgcGFyc2luZyBjb29raWVzIGZyb20gcmVzdWx0OiAnJHtqc0Nvb2tpZXN9J2ApO1xuICB9XG59O1xuXG5jb21tYW5kcy5zZXRDb29raWUgPSBhc3luYyBmdW5jdGlvbiAoY29va2llKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgY29va2llID0gXy5jbG9uZShjb29raWUpO1xuXG4gIC8vIGlmIGBwYXRoYCBmaWVsZCBpcyBub3Qgc3BlY2lmaWVkLCBTYWZhcmkgd2lsbCBub3QgdXBkYXRlIGNvb2tpZXMgYXMgZXhwZWN0ZWQ7IGVnIGlzc3VlICMxNzA4XG4gIGlmICghY29va2llLnBhdGgpIHtcbiAgICBjb29raWUucGF0aCA9IFwiL1wiO1xuICB9XG5cbiAgbGV0IGpzQ29va2llID0gY29va2llVXRpbHMuY3JlYXRlSlNDb29raWUoY29va2llLm5hbWUsIGNvb2tpZS52YWx1ZSwge1xuICAgIGV4cGlyZXM6IF8uaXNOdW1iZXIoY29va2llLmV4cGlyeSkgPyAobmV3IERhdGUoY29va2llLmV4cGlyeSAqIDEwMDApKS50b1VUQ1N0cmluZygpIDpcbiAgICAgIGNvb2tpZS5leHBpcnksXG4gICAgcGF0aDogY29va2llLnBhdGgsXG4gICAgZG9tYWluOiBjb29raWUuZG9tYWluLFxuICAgIGh0dHBPbmx5OiBjb29raWUuaHR0cE9ubHksXG4gICAgc2VjdXJlOiBjb29raWUuc2VjdXJlXG4gIH0pO1xuICBsZXQgc2NyaXB0ID0gYGRvY3VtZW50LmNvb2tpZSA9ICR7SlNPTi5zdHJpbmdpZnkoanNDb29raWUpfWA7XG4gIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW3NjcmlwdCwgW11dKTtcbn07XG5cbmNvbW1hbmRzLmRlbGV0ZUNvb2tpZSA9IGFzeW5jIGZ1bmN0aW9uIChjb29raWVOYW1lKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgLy8gY2hlY2sgY29va2llIGV4aXN0ZW5jZVxuICBsZXQgY29va2llcyA9IGF3YWl0IHRoaXMuZ2V0Q29va2llcygpO1xuICBpZiAoXy5pbmRleE9mKF8ubWFwKGNvb2tpZXMsICduYW1lJyksIGNvb2tpZU5hbWUpID09PSAtMSkge1xuICAgIGxvZ2dlci5kZWJ1ZyhgQ29va2llICcke2Nvb2tpZU5hbWV9JyBub3QgZm91bmQuIElnbm9yaW5nLmApO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGF3YWl0IHRoaXMuX2RlbGV0ZUNvb2tpZShjb29raWVOYW1lKTtcbn07XG5cbmNvbW1hbmRzLmRlbGV0ZUNvb2tpZXMgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgbGV0IGNvb2tpZXMgPSBhd2FpdCB0aGlzLmdldENvb2tpZXMoKTtcbiAgaWYgKGNvb2tpZXMubGVuZ3RoKSB7XG4gICAgZm9yIChsZXQgY29va2llIG9mIGNvb2tpZXMpIHtcbiAgICAgIGF3YWl0IHRoaXMuX2RlbGV0ZUNvb2tpZShjb29raWUubmFtZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuaGVscGVycy5fZGVsZXRlQ29va2llID0gYXN5bmMgZnVuY3Rpb24gKGNvb2tpZU5hbWUpIHtcbiAgbG9nZ2VyLmRlYnVnKGBEZWxldGluZyBjb29raWUgJyR7Y29va2llTmFtZX0nYCk7XG4gIGxldCB3ZWJDb29raWUgPSBjb29raWVVdGlscy5leHBpcmVDb29raWUoY29va2llTmFtZSwge3BhdGg6IFwiL1wifSk7XG4gIGxldCBzY3JpcHQgPSBgZG9jdW1lbnQuY29va2llID0gJHtKU09OLnN0cmluZ2lmeSh3ZWJDb29raWUpfWA7XG4gIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW3NjcmlwdCwgW11dKTtcbn07XG5cbmV4dGVuc2lvbnMuZmluZFdlYkVsZW1lbnRPckVsZW1lbnRzID0gYXN5bmMgZnVuY3Rpb24gKHN0cmF0ZWd5LCBzZWxlY3RvciwgbWFueSwgY3R4KSB7XG4gIGxldCBhdG9tc0VsZW1lbnQgPSB0aGlzLmdldEF0b21zRWxlbWVudChjdHgpO1xuICBsZXQgZWxlbWVudDtcbiAgbGV0IGRvRmluZCA9IGFzeW5jICgpID0+IHtcbiAgICBlbGVtZW50ID0gYXdhaXQgdGhpcy5leGVjdXRlQXRvbShgZmluZF9lbGVtZW50JHttYW55ID8gJ3MnIDogJyd9YCwgW3N0cmF0ZWd5LCBzZWxlY3RvciwgYXRvbXNFbGVtZW50XSk7XG4gICAgcmV0dXJuICFfLmlzTnVsbChlbGVtZW50KTtcbiAgfTtcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLmltcGxpY2l0V2FpdEZvckNvbmRpdGlvbihkb0ZpbmQpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyLm1lc3NhZ2UgJiYgXy5pc0Z1bmN0aW9uKGVyci5tZXNzYWdlLm1hdGNoKSAmJiBlcnIubWVzc2FnZS5tYXRjaCgvQ29uZGl0aW9uIHVubWV0LykpIHtcbiAgICAgIC8vIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBzZXR0aW5nIHJlcyB0byBlbXB0eSBhcnJheVxuICAgICAgZWxlbWVudCA9IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgaWYgKG1hbnkpIHtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWVsZW1lbnQgfHwgXy5zaXplKGVsZW1lbnQpID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgZXJyb3JzLk5vU3VjaEVsZW1lbnRFcnJvcigpO1xuICAgIH1cbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxufTtcblxuZXh0ZW5zaW9ucy53ZWJGbGlja0VsZW1lbnQgPSBhc3luYyBmdW5jdGlvbiAoZWwsIHhvZmZzZXQsIHlvZmZzZXQpIHtcbiAgbGV0IGF0b21zRWxlbWVudCA9IGF3YWl0IHRoaXMudXNlQXRvbXNFbGVtZW50KGVsKTtcblxuICBsZXQge3gsIHl9ID0gYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnZ2V0X3RvcF9sZWZ0X2Nvb3JkaW5hdGVzJywgW2F0b21zRWxlbWVudF0pO1xuICBsZXQge3dpZHRoLCBoZWlnaHR9ID0gYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnZ2V0X3NpemUnLCBbYXRvbXNFbGVtZW50XSk7XG5cbiAgLy8gdHJhbnNsYXRlIHRvIHByb3BlciBjb29yZGluYXRlc1xuICB4ID0geCArICh3aWR0aCAvIDIpO1xuICB5ID0geSArIChoZWlnaHQgLyAyKTtcblxuICBsZXQgZnJvbSA9IGF3YWl0IHRoaXMudHJhbnNsYXRlV2ViQ29vcmRzKHt4LCB5fSk7XG4gIGxldCB0byA9IGF3YWl0IHRoaXMudHJhbnNsYXRlV2ViQ29vcmRzKHt4OiB4ICsgeG9mZnNldCwgeTogeSArIHlvZmZzZXR9KTtcblxuICBsZXQgYXJncyA9IHtmcm9tLCB0b307XG4gIGxldCBjb21tYW5kID0gYGF1LmZsaWNrKCR7SlNPTi5zdHJpbmdpZnkoYXJncyl9KWA7XG4gIGF3YWl0IHRoaXMudWlBdXRvQ2xpZW50LnNlbmRDb21tYW5kKGNvbW1hbmQpO1xufTtcblxuZXh0ZW5zaW9ucy5tb2JpbGVXZWJOYXYgPSBhc3luYyBmdW5jdGlvbiAobmF2VHlwZSkge1xuICB0aGlzLnJlbW90ZS5hbGxvd05hdmlnYXRpb25XaXRob3V0UmVsb2FkKCk7XG4gIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW2BoaXN0b3J5LiR7bmF2VHlwZX0oKTtgLCBudWxsXSk7XG59O1xuXG5cbmV4dGVuc2lvbnMubmF0aXZlV2ViVGFwID0gYXN5bmMgZnVuY3Rpb24gKGVsKSB7XG4gIGxldCBhdG9tc0VsZW1lbnQgPSB0aGlzLnVzZUF0b21zRWxlbWVudChlbCk7XG4gIGxldCB7eCwgeX0gPSBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCdnZXRfdG9wX2xlZnRfY29vcmRpbmF0ZXMnLCBbYXRvbXNFbGVtZW50XSk7XG4gIGxldCB7d2lkdGgsIGhlaWdodH0gPSBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCdnZXRfc2l6ZScsIFthdG9tc0VsZW1lbnRdKTtcbiAgeCA9IHggKyAod2lkdGggLyAyKTtcbiAgeSA9IHkgKyAoaGVpZ2h0IC8gMikgKyBhd2FpdCB0aGlzLmdldEV4dHJhTmF0aXZlV2ViVGFwT2Zmc2V0KCk7XG5cbiAgdGhpcy5jdXJXZWJDb29yZHMgPSB7eCwgeX07XG4gIGF3YWl0IHRoaXMuY2xpY2tXZWJDb29yZHMoKTtcbiAgLy8gbWFrZSBzdXJlIHJlYWwgdGFwIGFjdHVhbGx5IGhhcyB0aW1lIHRvIHJlZ2lzdGVyXG4gIGF3YWl0IEIuZGVsYXkoNTAwKTtcbn07XG5cbmV4dGVuc2lvbnMuZ2V0RXh0cmFOYXRpdmVXZWJUYXBPZmZzZXQgPSBhc3luYyBmdW5jdGlvbiAoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVxdWlyZS1hd2FpdFxuICAvLyB0aGlzIHdpbGwgYmUgZmlsbGVkIGluIGJ5IGRyaXZlcnMgdXNpbmcgaXRcbiAgcmV0dXJuIDA7XG59O1xuXG5leHRlbnNpb25zLmNsaWNrV2ViQ29vcmRzID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsZXQgY29vcmRzID0gYXdhaXQgdGhpcy50cmFuc2xhdGVXZWJDb29yZHModGhpcy5jdXJXZWJDb29yZHMpO1xuICBhd2FpdCB0aGlzLmNsaWNrQ29vcmRzKGNvb3Jkcyk7XG59O1xuXG5leHRlbnNpb25zLnRyYW5zbGF0ZVdlYkNvb3JkcyA9IGFzeW5jIGZ1bmN0aW9uIChjb29yZHMpIHtcbiAgbG9nZ2VyLmRlYnVnKGBUcmFuc2xhdGluZyBjb29yZGluYXRlcyAoJHtKU09OLnN0cmluZ2lmeShjb29yZHMpfSkgdG8gd2ViIGNvb3JkaW5hdGVzYCk7XG4gIGxldCB3dkNtZCA9ICdhdS5nZXRFbGVtZW50c0J5VHlwZShcXCd3ZWJ2aWV3XFwnKSc7XG4gIGxldCB3ZWJ2aWV3SW5kZXggPSB0aGlzLndlYkNvbnRleHRJbmRleCgpO1xuXG4gIC8vIGFkZCBzdGF0aWMgb2Zmc2V0IGZvciBzYWZhcmkgaW4gbGFuZHNjYXBlIG1vZGVcbiAgbGV0IHlPZmZzZXQgPSB0aGlzLm9wdHMuY3VyT3JpZW50YXRpb24gPT09ICdMQU5EU0NBUEUnID8gdGhpcy5sYW5kc2NhcGVXZWJDb29yZHNPZmZzZXQgOiAwO1xuXG4gIC8vIGFic29sdXRpemUgd2ViIGNvb3Jkc1xuICBsZXQgd2Vidmlld3MgPSBhd2FpdCB0aGlzLnVpQXV0b0NsaWVudC5zZW5kQ29tbWFuZCh3dkNtZCk7XG4gIGlmICh3ZWJ2aWV3cy5sZW5ndGggPCAxKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Vbmtub3duRXJyb3IuY29kZSgnQ291bGQgbm90IGZpbmQgYW55IHdlYnZpZXdzIHRvIGNsaWNrIGluc2lkZSEnKTtcbiAgfVxuICBpZiAoXy5pc1VuZGVmaW5lZCh3ZWJ2aWV3c1t3ZWJ2aWV3SW5kZXhdKSkge1xuICAgIGxvZ2dlci53YXJuKGBDb3VsZCBub3QgZmluZCB3ZWJ2aWV3IGF0IGluZGV4ICR7d2Vidmlld0luZGV4fSwgdGFraW5nIGAgK1xuICAgICAgICAgICAgICAgIGBsYXN0IGF2YWlsYWJsZSBvbmUgZm9yIGNsaWNraW5nIHB1cnBvc2VzYCk7XG4gICAgd2Vidmlld0luZGV4ID0gd2Vidmlld3MubGVuZ3RoIC0gMTtcbiAgfVxuXG4gIGxldCB3dklkID0gd2Vidmlld3Nbd2Vidmlld0luZGV4XS5FTEVNRU5UO1xuICBsZXQgbG9jQ21kID0gYGF1LmdldEVsZW1lbnQoJyR7d3ZJZH0nKS5yZWN0KClgO1xuICBsZXQgcmVjdCA9IGF3YWl0IHRoaXMudWlBdXRvQ2xpZW50LnNlbmRDb21tYW5kKGxvY0NtZCk7XG4gIGxldCB3dlBvcyA9IHt4OiByZWN0Lm9yaWdpbi54LCB5OiByZWN0Lm9yaWdpbi55fTtcbiAgbGV0IHJlYWxEaW1zID0ge3c6IHJlY3Quc2l6ZS53aWR0aCwgaDogcmVjdC5zaXplLmhlaWdodH07XG5cbiAgbGV0IGNtZCA9ICcoZnVuY3Rpb24gKCkgeyByZXR1cm4ge3c6IGRvY3VtZW50LndpZHRoLCBoOiBkb2N1bWVudC5oZWlnaHR9OyB9KSgpJztcbiAgbGV0IHt3LCBofSA9IGF3YWl0IHRoaXMucmVtb3RlLmV4ZWN1dGUoY21kKTtcbiAgbGV0IHd2RGltcyA9IHt3LCBofTtcblxuICBpZiAod3ZEaW1zICYmIHJlYWxEaW1zICYmIHd2UG9zKSB7XG4gICAgbGV0IHhSYXRpbyA9IHJlYWxEaW1zLncgLyB3dkRpbXMudztcbiAgICBsZXQgeVJhdGlvID0gcmVhbERpbXMuaCAvIHd2RGltcy5oO1xuICAgIGxldCBzZXJ2aWNlQmFySGVpZ2h0ID0gMjA7XG4gICAgaWYgKHBhcnNlRmxvYXQodGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbikgPj0gOCkge1xuICAgICAgLy8gaW9zOCBpbmNsdWRlcyB0aGUgc2VydmljZSBiYXIgaGVpZ2h0IGluIHRoZSBhcHBcbiAgICAgIHNlcnZpY2VCYXJIZWlnaHQgPSAwO1xuICAgIH1cbiAgICBsZXQgbmV3Q29vcmRzID0ge1xuICAgICAgeDogd3ZQb3MueCArIE1hdGgucm91bmQoeFJhdGlvICogY29vcmRzLngpLFxuICAgICAgeTogd3ZQb3MueSArIHlPZmZzZXQgKyBNYXRoLnJvdW5kKHlSYXRpbyAqIGNvb3Jkcy55KSAtIHNlcnZpY2VCYXJIZWlnaHRcbiAgICB9O1xuICAgIGxvZ2dlci5kZWJ1ZyhgQ29udmVydGVkIHdlYiBjb29yZHMgJHtKU09OLnN0cmluZ2lmeShjb29yZHMpfSBgICtcbiAgICAgICAgICAgICAgICBgaW50byByZWFsIGNvb3JkcyAke0pTT04uc3RyaW5naWZ5KG5ld0Nvb3Jkcyl9YCk7XG4gICAgcmV0dXJuIG5ld0Nvb3JkcztcbiAgfVxufTtcblxuaGVscGVycy5jbGlja0Nvb3JkcyA9IGFzeW5jIGZ1bmN0aW9uIChjb29yZHMpIHtcbiAgaWYgKHRoaXMudXNlUm9ib3QpIHtcbiAgICAvLyB2YXIgdGFwVXJsID0gdGhpcy5hcmdzLnJvYm90VXJsICsgXCIvdGFwXCI7XG4gICAgLy8gcmVxdWVzdC5wb3N0KHt1cmw6dGFwVXJsLCBmb3JtOiB7eDpjb29yZHMueCwgeTpjb29yZHMueX19LCBjYik7XG4gICAgLypUT0RPKi90aHJvdyBuZXcgZXJyb3JzLk5vdFlldEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgb3B0cyA9IGNvb3JkcztcbiAgICBvcHRzLnRhcENvdW50ID0gMTtcbiAgICBvcHRzLmR1cmF0aW9uID0gMC4zO1xuICAgIG9wdHMudG91Y2hDb3VudCA9IDE7XG4gICAgbGV0IGNvbW1hbmQgPSBgYXUuY29tcGxleFRhcCgke0pTT04uc3RyaW5naWZ5KG9wdHMpfSlgO1xuICAgIGF3YWl0IHRoaXMudWlBdXRvQ2xpZW50LnNlbmRDb21tYW5kKGNvbW1hbmQpO1xuICB9XG59O1xuXG5oZWxwZXJzLmV4ZWN1dGVBdG9tID0gYXN5bmMgZnVuY3Rpb24gKGF0b20sIGFyZ3MsIGFsd2F5c0RlZmF1bHRGcmFtZSA9IGZhbHNlKSB7XG4gIGxldCBmcmFtZXMgPSBhbHdheXNEZWZhdWx0RnJhbWUgPT09IHRydWUgPyBbXSA6IHRoaXMuY3VyV2ViRnJhbWVzO1xuICBsZXQgcHJvbWlzZSA9IHRoaXMucmVtb3RlLmV4ZWN1dGVBdG9tKGF0b20sIGFyZ3MsIGZyYW1lcyk7XG4gIHJldHVybiBhd2FpdCB0aGlzLndhaXRGb3JBdG9tKHByb21pc2UpO1xufTtcblxuaGVscGVycy5leGVjdXRlQXRvbUFzeW5jID0gYXN5bmMgZnVuY3Rpb24gKGF0b20sIGFyZ3MsIHJlc3BvbnNlVXJsKSB7XG4gIC8vIHNhdmUgdGhlIHJlc29sdmUgYW5kIHJlamVjdCBtZXRob2RzIG9mIHRoZSBwcm9taXNlIHRvIGJlIHdhaXRlZCBmb3JcbiAgbGV0IHByb21pc2UgPSBuZXcgQigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdGhpcy5hc3luY1Byb21pc2UgPSB7cmVzb2x2ZSwgcmVqZWN0fTtcbiAgfSk7XG4gIGF3YWl0IHRoaXMucmVtb3RlLmV4ZWN1dGVBdG9tQXN5bmMoYXRvbSwgYXJncywgdGhpcy5jdXJXZWJGcmFtZXMsIHJlc3BvbnNlVXJsKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMud2FpdEZvckF0b20ocHJvbWlzZSk7XG59O1xuXG5oZWxwZXJzLndhaXRGb3JBdG9tID0gYXN5bmMgZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgLy8gbmVlZCB0byBjaGVjayBmb3IgYWxlcnQgd2hpbGUgdGhlIGF0b20gaXMgYmVpbmcgZXhlY3V0ZWQuXG4gIC8vIHNvIG5vdGlmeSBvdXJzZWx2ZXMgd2hlbiBpdCBoYXBwZW5zXG4gIGxldCBkb25lID0gZmFsc2U7XG4gIGxldCBlcnJvciA9IG51bGw7XG4gIHByb21pc2UudGhlbigocmVzKSA9PiB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tdGhlblxuICAgIGRvbmUgPSB0cnVlO1xuICAgIHJldHVybiByZXM7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tY2FsbGJhY2tzXG4gICAgbG9nZ2VyLmRlYnVnKGBFcnJvciByZWNlaXZlZCB3aGlsZSBleGVjdXRpbmcgYXRvbTogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAvLyBlcnJvciBnZXRzIHN3YWxsb3dlZCwgc28gc2F2ZSBhbmQgY2hlY2sgbGF0ZXJcbiAgICBkb25lID0gdHJ1ZTtcbiAgICBlcnJvciA9IGVycjtcbiAgfSk7XG4gIC8vIHRyeSB0ZW4gdGltZXMgdG8gY2hlY2sgYWxlcnQsIGlmIHdlIGFyZSBub3QgZG9uZSB5ZXRcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgLy8gY2hlY2sgaWYgdGhlIHByb21pc2UgaGFzIGJlZW4gcmVzb2x2ZWRcbiAgICBpZiAoZG9uZSkgYnJlYWs7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY3VybHlcbiAgICBhd2FpdCBCLmRlbGF5KDUwMCk7XG4gICAgaWYgKGRvbmUpIGJyZWFrOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGN1cmx5XG4gICAgLy8gY2hlY2sgaWYgdGhlcmUgaXMgYW4gYWxlcnRcbiAgICBpZiAoYXdhaXQgdGhpcy5jaGVja0ZvckFsZXJ0KCkpIHtcbiAgICAgIC8vIHdlIGZvdW5kIGFuIGFsZXJ0LCBhbmQgc2hvdWxkIGp1c3QgcmV0dXJuIGNvbnRyb2xcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cblxuICBsZXQgcmVzID0gYXdhaXQgcHJvbWlzZTtcbiAgaWYgKGVycm9yKSB7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgcmV0dXJuIHRoaXMucGFyc2VFeGVjdXRlUmVzcG9uc2UocmVzKTtcbn07XG5cbmhlbHBlcnMuY2hlY2tGb3JBbGVydCA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgaWYgKCFfLmlzTnVsbCh0aGlzLnVpQXV0b0NsaWVudCkpIHtcbiAgICBsb2dnZXIuZGVidWcoJ2F0b20gZGlkIG5vdCByZXR1cm4geWV0LCBjaGVja2luZyB0byBzZWUgaWYgJyArXG4gICAgICAgICAgICAgICAgICd3ZSBhcmUgYmxvY2tlZCBieSBhbiBhbGVydCcpO1xuICAgIGxldCBwcmVzZW50ID0gYXdhaXQgdGhpcy51aUF1dG9DbGllbnQuc2VuZENvbW1hbmQoJ2F1LmFsZXJ0SXNQcmVzZW50KCknKTtcbiAgICBpZiAoIXByZXNlbnQpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnTm8gYWxlcnQgZm91bmQuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnRm91bmQgYW4gYWxlcnQsIHJldHVybmluZyBjb250cm9sIHRvIGNsaWVudCcpO1xuICAgIH1cbiAgICByZXR1cm4gcHJlc2VudDtcbiAgfVxufTtcblxuaGVscGVycy5nZXRBdG9tc0VsZW1lbnQgPSBmdW5jdGlvbiAod2RJZCkge1xuICBsZXQgYXRvbXNJZDtcbiAgdHJ5IHtcbiAgICBhdG9tc0lkID0gdGhpcy53ZWJFbGVtZW50SWRzW3BhcnNlSW50KHdkSWQsIDEwKSAtIEVMRU1FTlRfT0ZGU0VUXTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChfLmlzVW5kZWZpbmVkKGF0b21zSWQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHtFTEVNRU5UOiBhdG9tc0lkfTtcbn07XG5cbmhlbHBlcnMudXNlQXRvbXNFbGVtZW50ID0gZnVuY3Rpb24gKGVsKSB7XG4gIGlmIChwYXJzZUludChlbCwgMTApIDwgRUxFTUVOVF9PRkZTRVQpIHtcbiAgICBsb2dnZXIuZGVidWcoYEVsZW1lbnQgd2l0aCBpZCAnJHtlbH0nIHBhc3NlZCBpbiBmb3IgdXNlIHdpdGggYCArXG4gICAgICAgICAgICAgICAgIGBhdG9tcywgYnV0IGl0J3Mgb3V0IG9mIG91ciBpbnRlcm5hbCBzY29wZS4gQWRkaW5nICR7RUxFTUVOVF9PRkZTRVR9LmApO1xuICAgIGVsID0gKHBhcnNlSW50KGVsLCAxMCkgKyBFTEVNRU5UX09GRlNFVCkudG9TdHJpbmcoKTtcbiAgfVxuICBsZXQgYXRvbXNFbGVtZW50ID0gdGhpcy5nZXRBdG9tc0VsZW1lbnQoZWwpO1xuICBpZiAoYXRvbXNFbGVtZW50ID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Vbmtub3duRXJyb3IoYEVycm9yIGNvbnZlcnRpbmcgZWxlbWVudCBJRCBmb3IgdXNpbmcgaW4gV0QgYXRvbXM6ICcke2VsfSdgKTtcbiAgfVxuICByZXR1cm4gYXRvbXNFbGVtZW50O1xufTtcblxuaGVscGVycy5jb252ZXJ0RWxlbWVudHNGb3JBdG9tcyA9IGZ1bmN0aW9uIChhcmdzID0gW10pIHtcbiAgbGV0IG5ld0FyZ3MgPSBbXTtcbiAgZm9yIChsZXQgYXJnIG9mIGFyZ3MpIHtcbiAgICBpZiAoIV8uaXNOdWxsKGFyZykgJiYgIV8uaXNVbmRlZmluZWQoYXJnLkVMRU1FTlQpKSB7XG4gICAgICBsZXQgYXRvbXNFbGVtZW50ID0gdGhpcy5nZXRBdG9tc0VsZW1lbnQoYXJnLkVMRU1FTlQpO1xuICAgICAgaWYgKGF0b21zRWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JzLlVua25vd25FcnJvcihgRXJyb3IgY29udmVydGluZyBlbGVtZW50IElEIGZvciB1c2luZyBpbiBXRCBhdG9tczogJyR7YXJnLkVMRU1FTlR9J2ApO1xuICAgICAgfVxuICAgICAgbmV3QXJncy5wdXNoKGF0b21zRWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld0FyZ3MucHVzaChhcmcpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3QXJncztcbn07XG5cbmhlbHBlcnMucGFyc2VFeGVjdXRlUmVzcG9uc2UgPSBmdW5jdGlvbiAocmVzKSB7XG4gIGlmIChfLmlzTnVsbChyZXMpIHx8IF8uaXNVbmRlZmluZWQocmVzKSkgcmV0dXJuIG51bGw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY3VybHlcblxuICBsZXQgd2RFbGVtZW50ID0gbnVsbDtcbiAgaWYgKCFfLmlzQXJyYXkocmVzKSkge1xuICAgIGlmICghXy5pc1VuZGVmaW5lZChyZXMuRUxFTUVOVCkpIHtcbiAgICAgIHdkRWxlbWVudCA9IHRoaXMucGFyc2VFbGVtZW50UmVzcG9uc2UocmVzKTtcbiAgICAgIGlmICh3ZEVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5Vbmtub3duRXJyb3IoYEVycm9yIGNvbnZlcnRpbmcgZWxlbWVudCBJRCBhdG9tIGZvciB1c2luZyBpbiBXRDogJyR7cmVzLkVMRU1FTlR9J2ApO1xuICAgICAgfVxuICAgICAgcmVzID0gd2RFbGVtZW50O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyB2YWx1ZSBpcyBhbiBhcnJheSwgc28gZ28gdGhyb3VnaCBhbmQgY29udmVydCBlYWNoXG4gICAgbGV0IGFyZ3MgPSBbXTtcbiAgICBmb3IgKGxldCBhcmcgb2YgcmVzKSB7XG4gICAgICB3ZEVsZW1lbnQgPSBhcmc7XG4gICAgICBpZiAoIV8uaXNOdWxsKGFyZykgJiYgIV8uaXNVbmRlZmluZWQoYXJnLkVMRU1FTlQpKSB7XG4gICAgICAgIHdkRWxlbWVudCA9IHRoaXMucGFyc2VFbGVtZW50UmVzcG9uc2UoYXJnKTtcbiAgICAgICAgaWYgKHdkRWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgICAgIHRocm93IG5ldyBlcnJvcnMuVW5rbm93bkVycm9yKGBFcnJvciBjb252ZXJ0aW5nIGVsZW1lbnQgSUQgYXRvbSBmb3IgdXNpbmcgaW4gV0Q6ICcke2FyZy5FTEVNRU5UfSdgKTtcbiAgICAgICAgfVxuICAgICAgICBhcmdzLnB1c2god2RFbGVtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFyZ3MucHVzaChhcmcpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXMgPSBhcmdzO1xuICB9XG4gIHJldHVybiByZXM7XG59O1xuXG5oZWxwZXJzLnBhcnNlRWxlbWVudFJlc3BvbnNlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgbGV0IG9iaklkID0gZWxlbWVudC5FTEVNRU5UO1xuICBsZXQgY2xpZW50SWQgPSAoRUxFTUVOVF9PRkZTRVQgKyB0aGlzLndlYkVsZW1lbnRJZHMubGVuZ3RoKS50b1N0cmluZygpO1xuICB0aGlzLndlYkVsZW1lbnRJZHMucHVzaChvYmpJZCk7XG4gIHJldHVybiB7RUxFTUVOVDogY2xpZW50SWR9O1xufTtcblxuXG5PYmplY3QuYXNzaWduKGV4dGVuc2lvbnMsIGNvbW1hbmRzLCBoZWxwZXJzKTtcbmV4cG9ydCB7IGNvbW1hbmRzLCBoZWxwZXJzIH07XG5leHBvcnQgZGVmYXVsdCBleHRlbnNpb25zO1xuIl0sImZpbGUiOiJsaWIvY29tbWFuZHMvd2ViLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uIn0=
